#!/usr/bin/env sh
. "$(dirname "$0")/_/husky.sh"

REPO_ROOT="$(git rev-parse --show-toplevel 2>/dev/null || pwd)"
PROJECT_DIR="$REPO_ROOT/unify_trucking_db"

( cd "$REPO_ROOT" && npx lint-staged ) || exit 1

if [ -f "$PROJECT_DIR/package.json" ]; then
  ( cd "$PROJECT_DIR" && npm run -s lint && npx tsc -p tsconfig.json --noEmit ) || exit 1
else
  ( cd "$REPO_ROOT" && npm run -s lint && npx tsc -p tsconfig.json --noEmit ) || exit 1
fi
