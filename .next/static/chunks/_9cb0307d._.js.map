{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/dvskrishna/Business/innovyom/Unify_Trucking_DB/unify_trucking_db/lib/license-rules.ts"],"sourcesContent":["// Patterns derived from Microsoft Purview (2024-08-19) + ICBC 8-digit update.\n// https://learn.microsoft.com/en-us/purview/sit-defn-canada-drivers-license-number\n// https://www.icbc.com/about-icbc/newsroom/2023-feb06-DLnumbers\ntype Rule = {\n  // Replace typed letters/digits with mask (we add hyphens/spaces)\n  format: (raw: string) => string;\n  // Acceptable normalized pattern (strip hyphens/spaces before testing)\n  test: (normalized: string) => boolean;\n};\n\nfunction onlyAZ09(s: string) {\n  return s.toUpperCase().replace(/[^A-Z0-9]/g, \"\");\n}\nfunction stripSep(s: string) {\n  return s.replace(/[\\s-]/g, \"\");\n}\n// chunk helper was used in previous rules; removed after MB rule update\n\nexport const caRules: Record<string, Rule> = {\n  // Alberta: 6 digits - 3 digits OR 5-9 digits (Purview). We'll normalize to 9 digits or 6-3 display.\n  \"CA-AB\": {\n    format: (raw) => {\n      const s = raw.replace(/\\D/g, \"\").slice(0, 9);\n      return s.length > 6 ? `${s.slice(0, 6)}-${s.slice(6)}` : s;\n    },\n    test: (n) => /^\\d{9}$/.test(n) || /^\\d{5,9}$/.test(n),\n  },\n  // BC: historically 7 digits; since 2023, 8 digits permitted.\n  \"CA-BC\": {\n    format: (raw) => raw.replace(/\\D/g, \"\").slice(0, 8),\n    test: (n) => /^\\d{7,8}$/.test(n),\n  },\n  // CA-MB: display as 2-2-2-6 (e.g., DA-GG-UV-S057NT), store alnum only (12 chars typical).\n  \"CA-MB\": {\n    format: (raw) => {\n      const s = onlyAZ09(raw).slice(0, 12);\n      // group 2-2-2-6\n      if (!s) return \"\";\n      const a = s.slice(0, 2),\n        b = s.slice(2, 4),\n        c = s.slice(4, 6),\n        d = s.slice(6);\n      return [a, b, c, d].filter(Boolean).join(\"-\");\n    },\n    // Canonical 12 alphanumerics\n    test: (n) => /^[A-Z0-9]{12}$/.test(n),\n  },\n  // New Brunswick: 5–7 digits\n  \"CA-NB\": { format: (r) => r.replace(/\\D/g, \"\").slice(0, 7), test: (n) => /^\\d{5,7}$/.test(n) },\n  // Newfoundland & Labrador: 1 letter + 9 digits\n  \"CA-NL\": {\n    format: (raw) => {\n      const s = onlyAZ09(raw);\n      return (s.slice(0, 1) + s.slice(1, 10)).toUpperCase();\n    },\n    test: (n) => /^[A-Z]\\d{9}$/.test(n),\n  },\n  // Nova Scotia: Purview shows letter-heavy pattern; accept 14-char mixed alnum.\n  \"CA-NS\": {\n    format: (raw) => onlyAZ09(raw).slice(0, 14),\n    test: (n) => /^[A-Z0-9]{6,14}$/.test(n),\n  },\n  // Ontario: letter + 4 digits + 5 digits + 5 digits (display with hyphens)\n  \"CA-ON\": {\n    format: (raw) => {\n      const s = onlyAZ09(raw).slice(0, 14); // A#### ##### #####\n      const a = s.slice(0, 1),\n        b = s.slice(1, 5),\n        c = s.slice(5, 10),\n        d = s.slice(10, 15);\n      return [a + b, c, d].filter(Boolean).join(\"-\");\n    },\n    test: (n) => /^[A-Z]\\d{14}$/.test(n),\n  },\n  // Prince Edward Island: 5–6 digits\n  \"CA-PE\": { format: (r) => r.replace(/\\D/g, \"\").slice(0, 6), test: (n) => /^\\d{5,6}$/.test(n) },\n  // Quebec: 1 letter + 12 digits\n  \"CA-QC\": {\n    format: (raw) => {\n      const s = onlyAZ09(raw);\n      return (s.slice(0, 1) + s.slice(1, 13)).toUpperCase();\n    },\n    test: (n) => /^[A-Z]\\d{12}$/.test(n),\n  },\n  // Saskatchewan: 8 digits\n  \"CA-SK\": { format: (r) => r.replace(/\\D/g, \"\").slice(0, 8), test: (n) => /^\\d{8}$/.test(n) },\n  // Territories & others (fallback): allow 5–15 alphanumerics\n  \"CA-DEFAULT\": { format: (r) => onlyAZ09(r).slice(0, 15), test: (n) => /^[A-Z0-9]{5,15}$/.test(n) },\n};\n\nexport function formatLicence(jurisdiction: string, input: string) {\n  const fallback = caRules[\"CA-DEFAULT\"] as Rule;\n  const rule = (caRules[jurisdiction] ?? fallback) as Rule;\n  return rule.format(input);\n}\nexport function isValidLicence(jurisdiction: string, input: string) {\n  const fallback = caRules[\"CA-DEFAULT\"] as Rule;\n  const rule = (caRules[jurisdiction] ?? fallback) as Rule;\n  return rule.test(stripSep(input.toUpperCase()));\n}\nexport function normalizedLicence(input: string) {\n  return stripSep(input.toUpperCase());\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 131, "column": 0}, "map": {"version":3,"sources":["file:///Users/dvskrishna/Business/innovyom/Unify_Trucking_DB/unify_trucking_db/lib/postal.ts"],"sourcesContent":["export function detectCA(postalRaw: string): { ok: boolean; normalized?: string; province?: string } {\n  const s = postalRaw.toUpperCase().replace(/\\s+/g, \"\");\n  const re = /^[ABCEGHJ-NPRSTVXY]\\d[A-Z]\\d[A-Z]\\d$/; // Canada Post\n  if (!re.test(s)) return { ok: false };\n  const norm = `${s.slice(0, 3)} ${s.slice(3)}`;\n  const first = s.charAt(0);\n  const PROV: Record<string, string> = {\n    A: \"NL\",\n    B: \"NS\",\n    C: \"PE\",\n    E: \"NB\",\n    G: \"QC\",\n    H: \"QC\",\n    J: \"QC\",\n    K: \"ON\",\n    L: \"ON\",\n    M: \"ON\",\n    N: \"ON\",\n    P: \"ON\",\n    R: \"MB\",\n    S: \"SK\",\n    T: \"AB\",\n    V: \"BC\",\n    Y: \"YT\",\n    X: \"NT\", // Note: NU also uses X\n  };\n  const province = PROV[first] ?? undefined;\n  return { ok: true, normalized: norm, province };\n}\n\nexport function isUSZip(raw: string) {\n  return /^\\d{5}(-\\d{4})?$/.test(raw.trim());\n}\n"],"names":[],"mappings":";;;;;;AAAO,SAAS,SAAS,SAAiB;IACxC,MAAM,IAAI,UAAU,WAAW,GAAG,OAAO,CAAC,QAAQ;IAClD,MAAM,KAAK,wCAAwC,cAAc;IACjE,IAAI,CAAC,GAAG,IAAI,CAAC,IAAI,OAAO;QAAE,IAAI;IAAM;IACpC,MAAM,OAAO,AAAC,GAAmB,OAAjB,EAAE,KAAK,CAAC,GAAG,IAAG,KAAc,OAAX,EAAE,KAAK,CAAC;IACzC,MAAM,QAAQ,EAAE,MAAM,CAAC;IACvB,MAAM,OAA+B;QACnC,GAAG;QACH,GAAG;QACH,GAAG;QACH,GAAG;QACH,GAAG;QACH,GAAG;QACH,GAAG;QACH,GAAG;QACH,GAAG;QACH,GAAG;QACH,GAAG;QACH,GAAG;QACH,GAAG;QACH,GAAG;QACH,GAAG;QACH,GAAG;QACH,GAAG;QACH,GAAG;IACL;QACiB;IAAjB,MAAM,WAAW,CAAA,cAAA,IAAI,CAAC,MAAM,cAAX,yBAAA,cAAe;IAChC,OAAO;QAAE,IAAI;QAAM,YAAY;QAAM;IAAS;AAChD;AAEO,SAAS,QAAQ,GAAW;IACjC,OAAO,mBAAmB,IAAI,CAAC,IAAI,IAAI;AACzC","debugId":null}},
    {"offset": {"line": 183, "column": 0}, "map": {"version":3,"sources":["file:///Users/dvskrishna/Business/innovyom/Unify_Trucking_DB/unify_trucking_db/lib/license-classes.ts"],"sourcesContent":["export const CA_CLASSES: Record<string, string[]> = {\n  \"CA-MB\": [\"1\", \"2\", \"3\", \"4\", \"5\", \"6\"],\n  \"CA-ON\": [\"A\", \"B\", \"C\", \"D\", \"E\", \"F\", \"G\", \"M\"],\n  \"CA-BC\": [\"1\", \"2\", \"3\", \"4\", \"5\", \"6\", \"7\", \"8\"],\n  \"CA-AB\": [\"1\", \"2\", \"3\", \"4\", \"5\", \"6\", \"7\"],\n  \"CA-SK\": [\"1\", \"2\", \"3\", \"4\", \"5\", \"6\", \"7\"],\n  \"CA-QC\": [\"1\", \"2\", \"3\", \"4\", \"5\", \"6\"],\n  \"CA-NB\": [\"1\", \"2\", \"3\", \"4\", \"5\", \"6\", \"7\"],\n  \"CA-NL\": [\"1\", \"2\", \"3\", \"4\", \"5\", \"6\"],\n  \"CA-NS\": [\"1\", \"2\", \"3\", \"4\", \"5\", \"6\", \"7\"],\n  \"CA-PE\": [\"1\", \"2\", \"3\", \"4\", \"5\"],\n};\n\nexport function classesFor(jurisdiction: string): string[] {\n  return CA_CLASSES[jurisdiction] ?? [];\n}\n\n"],"names":[],"mappings":";;;;;;AAAO,MAAM,aAAuC;IAClD,SAAS;QAAC;QAAK;QAAK;QAAK;QAAK;QAAK;KAAI;IACvC,SAAS;QAAC;QAAK;QAAK;QAAK;QAAK;QAAK;QAAK;QAAK;KAAI;IACjD,SAAS;QAAC;QAAK;QAAK;QAAK;QAAK;QAAK;QAAK;QAAK;KAAI;IACjD,SAAS;QAAC;QAAK;QAAK;QAAK;QAAK;QAAK;QAAK;KAAI;IAC5C,SAAS;QAAC;QAAK;QAAK;QAAK;QAAK;QAAK;QAAK;KAAI;IAC5C,SAAS;QAAC;QAAK;QAAK;QAAK;QAAK;QAAK;KAAI;IACvC,SAAS;QAAC;QAAK;QAAK;QAAK;QAAK;QAAK;QAAK;KAAI;IAC5C,SAAS;QAAC;QAAK;QAAK;QAAK;QAAK;QAAK;KAAI;IACvC,SAAS;QAAC;QAAK;QAAK;QAAK;QAAK;QAAK;QAAK;KAAI;IAC5C,SAAS;QAAC;QAAK;QAAK;QAAK;QAAK;KAAI;AACpC;AAEO,SAAS,WAAW,YAAoB;QACtC;IAAP,OAAO,CAAA,2BAAA,UAAU,CAAC,aAAa,cAAxB,sCAAA,2BAA4B,EAAE;AACvC","debugId":null}},
    {"offset": {"line": 289, "column": 0}, "map": {"version":3,"sources":["file:///Users/dvskrishna/Business/innovyom/Unify_Trucking_DB/unify_trucking_db/lib/passport/patterns.ts"],"sourcesContent":["export type PassportPattern = {\n  re: RegExp;\n  maxLen?: number;\n  minLen?: number;\n  hint: string;\n};\n\n// Canonical normalizer: uppercase and strip spaces/hyphens/dots\nexport function canon(s: string): string {\n  return (s || \"\").toUpperCase().replace(/[\\s\\-.]/g, \"\");\n}\n\n// Country-specific patterns (initial coverage + expand as needed)\nexport const PASSPORT: Record<string, PassportPattern> = {\n  CA: { re: /^[A-Z]{2}\\d{6}$/, minLen: 8, maxLen: 8, hint: \"AA123456\" },\n  US: { re: /^([A-Z]\\d{8}|\\d{9})$/, minLen: 9, maxLen: 9, hint: \"A12345678 or 123456789\" },\n  IN: { re: /^[A-Z]\\d{7}$/, minLen: 8, maxLen: 8, hint: \"A1234567\" },\n  PH: { re: /^([A-Z]\\d{6}|[A-Z]{2}\\d{6,7}|[A-Z]\\d{7}[A-Z])$/, minLen: 7, maxLen: 9, hint: \"P1234567 / AB123456 / AB1234567\" },\n  GB: { re: /^\\d{9}$/, minLen: 9, maxLen: 9, hint: \"123456789\" },\n  PK: { re: /^[A-Z]{2}\\d{7}$/, minLen: 9, maxLen: 9, hint: \"AB1234567\" },\n  BD: { re: /^[A-Z]\\d{7}$/, minLen: 8, maxLen: 8, hint: \"A1234567\" },\n  NG: { re: /^[A-Z]\\d{8}$/, minLen: 9, maxLen: 9, hint: \"A12345678\" },\n  CN: { re: /^[EGDSP]\\d{8}$/, minLen: 9, maxLen: 9, hint: \"E12345678\" },\n  MX: { re: /^[A-Z]\\d{8}$/, minLen: 9, maxLen: 9, hint: \"A12345678\" },\n};\n\n// Fallback for countries without a specific rule: 6–10 alphanumerics\nexport const FALLBACK: PassportPattern = {\n  re: /^[A-Z0-9]{6,10}$/,\n  minLen: 6,\n  maxLen: 10,\n  hint: \"6–10 letters/digits\",\n};\n\n"],"names":[],"mappings":";;;;;;;;AAQO,SAAS,MAAM,CAAS;IAC7B,OAAO,CAAC,KAAK,EAAE,EAAE,WAAW,GAAG,OAAO,CAAC,YAAY;AACrD;AAGO,MAAM,WAA4C;IACvD,IAAI;QAAE,IAAI;QAAmB,QAAQ;QAAG,QAAQ;QAAG,MAAM;IAAW;IACpE,IAAI;QAAE,IAAI;QAAwB,QAAQ;QAAG,QAAQ;QAAG,MAAM;IAAyB;IACvF,IAAI;QAAE,IAAI;QAAgB,QAAQ;QAAG,QAAQ;QAAG,MAAM;IAAW;IACjE,IAAI;QAAE,IAAI;QAAkD,QAAQ;QAAG,QAAQ;QAAG,MAAM;IAAkC;IAC1H,IAAI;QAAE,IAAI;QAAW,QAAQ;QAAG,QAAQ;QAAG,MAAM;IAAY;IAC7D,IAAI;QAAE,IAAI;QAAmB,QAAQ;QAAG,QAAQ;QAAG,MAAM;IAAY;IACrE,IAAI;QAAE,IAAI;QAAgB,QAAQ;QAAG,QAAQ;QAAG,MAAM;IAAW;IACjE,IAAI;QAAE,IAAI;QAAgB,QAAQ;QAAG,QAAQ;QAAG,MAAM;IAAY;IAClE,IAAI;QAAE,IAAI;QAAkB,QAAQ;QAAG,QAAQ;QAAG,MAAM;IAAY;IACpE,IAAI;QAAE,IAAI;QAAgB,QAAQ;QAAG,QAAQ;QAAG,MAAM;IAAY;AACpE;AAGO,MAAM,WAA4B;IACvC,IAAI;IACJ,QAAQ;IACR,QAAQ;IACR,MAAM;AACR","debugId":null}},
    {"offset": {"line": 375, "column": 0}, "map": {"version":3,"sources":["file:///Users/dvskrishna/Business/innovyom/Unify_Trucking_DB/unify_trucking_db/lib/countries.ts"],"sourcesContent":["import countries from \"i18n-iso-countries\";\nimport en from \"i18n-iso-countries/langs/en.json\";\n\n// Workaround: i18n-iso-countries expects a locale object shape\ntype LocaleData = { locale: string; countries: Record<string, string> };\ncountries.registerLocale(en as unknown as LocaleData);\n\nexport type Country = { code: string; name: string };\n\n/**\n * Return all countries with ISO alpha-2 code and English official name.\n * Sorted alphabetically by name.\n */\nexport function allCountries(): Country[] {\n  const names = countries.getNames(\"en\", { select: \"official\" }) as Record<\n    string,\n    string\n  >;\n\n  return Object.entries(names)\n    .map(([code, name]) => ({\n      code: code.toUpperCase(),\n      name,\n    }))\n    .sort((a, b) => a.name.localeCompare(b.name));\n}\n\n/**\n * Check if a given code is a valid ISO alpha-2 country code.\n */\nexport function isCountry(code?: string): boolean {\n  if (!code) return false;\n  const c = code.toUpperCase();\n  try {\n    return Boolean(countries.alpha2ToNumeric(c));\n  } catch {\n    return false;\n  }\n}\n"],"names":[],"mappings":";;;;;;AAAA;AACA;;;AAIA,qOAAS,CAAC,cAAc,CAAC,gNAAE;AAQpB,SAAS;IACd,MAAM,QAAQ,qOAAS,CAAC,QAAQ,CAAC,MAAM;QAAE,QAAQ;IAAW;IAK5D,OAAO,OAAO,OAAO,CAAC,OACnB,GAAG,CAAC;YAAC,CAAC,MAAM,KAAK;eAAM;YACtB,MAAM,KAAK,WAAW;YACtB;QACF;OACC,IAAI,CAAC,CAAC,GAAG,IAAM,EAAE,IAAI,CAAC,aAAa,CAAC,EAAE,IAAI;AAC/C;AAKO,SAAS,UAAU,IAAa;IACrC,IAAI,CAAC,MAAM,OAAO;IAClB,MAAM,IAAI,KAAK,WAAW;IAC1B,IAAI;QACF,OAAO,QAAQ,qOAAS,CAAC,eAAe,CAAC;IAC3C,EAAE,UAAM;QACN,OAAO;IACT;AACF","debugId":null}},
    {"offset": {"line": 414, "column": 0}, "map": {"version":3,"sources":["file:///Users/dvskrishna/Business/innovyom/Unify_Trucking_DB/unify_trucking_db/lib/passport/validate.ts"],"sourcesContent":["import { canon, PASSPORT, FALLBACK, type PassportPattern } from \"./patterns\";\nimport { isCountry } from \"@/lib/countries\";\n\n/**\n * Return the passport pattern metadata for a given ISO2 country code.\n * Falls back to a sensible generic pattern (6–10 alnum) if unknown.\n */\nexport function passportPatternFor(country?: string): PassportPattern {\n  const code = (country || \"\").toUpperCase();\n  if (!isCountry(code)) return FALLBACK;\n  return PASSPORT[code] ?? FALLBACK;\n}\n\n/**\n * Validate a passport number against a country's known pattern.\n * Uses canonicalized (uppercase, alnum-only) value.\n */\nexport function isValidPassport(country: string | undefined, value: string): boolean {\n  const pat = passportPatternFor(country);\n  return pat.re.test(canon(value));\n}\n\n/**\n * Normalize a passport number for storage/compare:\n * - Uppercase\n * - Strip all non A–Z / 0–9\n */\nexport function normalizePassport(value: string): string {\n  return canon(value);\n}\n\n/**\n * Sanitize user input for a given country while typing:\n * - Uppercase alnum only\n * - Clip to country-specific maxLen when provided\n */\nexport function sanitizePassportInput(value: string, country?: string): string {\n  const pat = passportPatternFor(country);\n  let v = canon(value);\n  if (typeof pat.maxLen === \"number\" && pat.maxLen > 0) {\n    v = v.slice(0, pat.maxLen);\n  }\n  return v;\n}\n\n/**\n * Convenience: get a friendly hint string for the given country.\n * Falls back to generic text.\n */\nexport function passportHint(country?: string): string {\n  const pat = passportPatternFor(country);\n  return pat.hint || \"6–10 letters/digits\";\n}\n"],"names":[],"mappings":";;;;;;;;;;;;AAAA;AACA;;;AAMO,SAAS,mBAAmB,OAAgB;IACjD,MAAM,OAAO,CAAC,WAAW,EAAE,EAAE,WAAW;IACxC,IAAI,CAAC,IAAA,gIAAS,EAAC,OAAO,OAAO,0IAAQ;QAC9B;IAAP,OAAO,CAAA,iBAAA,0IAAQ,CAAC,KAAK,cAAd,4BAAA,iBAAkB,0IAAQ;AACnC;AAMO,SAAS,gBAAgB,OAA2B,EAAE,KAAa;IACxE,MAAM,MAAM,mBAAmB;IAC/B,OAAO,IAAI,EAAE,CAAC,IAAI,CAAC,IAAA,uIAAK,EAAC;AAC3B;AAOO,SAAS,kBAAkB,KAAa;IAC7C,OAAO,IAAA,uIAAK,EAAC;AACf;AAOO,SAAS,sBAAsB,KAAa,EAAE,OAAgB;IACnE,MAAM,MAAM,mBAAmB;IAC/B,IAAI,IAAI,IAAA,uIAAK,EAAC;IACd,IAAI,OAAO,IAAI,MAAM,KAAK,YAAY,IAAI,MAAM,GAAG,GAAG;QACpD,IAAI,EAAE,KAAK,CAAC,GAAG,IAAI,MAAM;IAC3B;IACA,OAAO;AACT;AAMO,SAAS,aAAa,OAAgB;IAC3C,MAAM,MAAM,mBAAmB;IAC/B,OAAO,IAAI,IAAI,IAAI;AACrB","debugId":null}},
    {"offset": {"line": 462, "column": 0}, "map": {"version":3,"sources":["file:///Users/dvskrishna/Business/innovyom/Unify_Trucking_DB/unify_trucking_db/lib/register-schemas.ts"],"sourcesContent":["import { z } from \"zod\";\nimport { isValidLicence, normalizedLicence } from \"@/lib/license-rules\";\nimport { detectCA, isUSZip } from \"@/lib/postal\";\nimport { classesFor } from \"@/lib/license-classes\";\nimport {\n  passportPatternFor,\n  isValidPassport,\n  normalizePassport,\n} from \"@/lib/passport/validate\";\nimport { isCountry } from \"@/lib/countries\";\n\n/** yyyy-mm-dd string */\nconst dateISO = z\n  .string()\n  .regex(/^\\d{4}-\\d{2}-\\d{2}$/, \"Use YYYY-MM-DD\");\n\nconst NAME = z\n  .string()\n  .trim()\n  .min(2, \"Enter at least 2 characters\")\n  .max(60, \"Too long\")\n  .regex(/^[A-Za-zÀ-ÖØ-öø-ÿ' -]+$/, \"Letters, spaces, hyphens, apostrophes only\");\n\nconst JURISDICTION = z.enum(\n  [\n    \"CA-AB\",\n    \"CA-BC\",\n    \"CA-MB\",\n    \"CA-NB\",\n    \"CA-NL\",\n    \"CA-NS\",\n    \"CA-ON\",\n    \"CA-PE\",\n    \"CA-QC\",\n    \"CA-SK\",\n    \"CA-YT\",\n    \"CA-NT\",\n    \"CA-NU\",\n  ],\n  { message: \"Select issuing authority\" },\n);\n\nconst EMAIL = z.string().email(\"Enter a valid email\");\n\n/** Digits-only (no +1 here). We keep UI to CA only. */\nconst PHONE_COUNTRY = z.enum([\"CA\"]).default(\"CA\");\nconst PHONE_DIGITS = z\n  .string()\n  .regex(/^\\d{10}$/, \"Enter a 10-digit Canadian phone number\");\n\nconst LICENSE_NO = z\n  .string()\n  .trim()\n  .min(3, \"Enter licence number\")\n  .max(20, \"Too long\")\n  .regex(/^[A-Za-z0-9-]+$/, \"Letters/numbers only\");\n\nconst ENGLISH_LEVEL = z.enum([\"Basic\", \"Conversational\", \"Fluent\", \"Native\"]);\n\nconst PASSPORT_NUMBER_GENERIC = z\n  .string()\n  .trim()\n  .toUpperCase()\n  .regex(/^[A-Z0-9]{6,10}$/, \"6–10 letters/digits\");\n\nconst PR_CARD_NUMBER = z\n  .string()\n  .trim()\n  .toUpperCase()\n  .regex(/^[A-Z]{2}\\d{8}$/, \"Format like AB12345678\");\n\nconst FILE_REQUIRED = z.instanceof(File, { message: \"File required\" });\n\nexport const RegisterSchema = z\n  .object({\n    // Names\n    givenName: NAME,\n    surname: NAME,\n    middleName: z.string().trim().max(60).optional().or(z.literal(\"\")),\n    givenNameKey: z.string().optional(),\n    surnameKey: z.string().optional(),\n\n    // Licence & jurisdiction\n    jurisdiction: JURISDICTION,\n    licenseNo: LICENSE_NO,\n    licenseClass: z.string().min(1, \"Select class\").max(5),\n    airBrake: z.boolean().optional(),\n    licenseExpiry: dateISO,\n    dob: dateISO,\n    gender: z\n      .enum([\"Male\", \"Female\", \"Non-binary\", \"Prefer not to say\"])\n      .optional(),\n\n    // Contact\n    email: EMAIL,\n    phone: PHONE_DIGITS, // text field holds digits only\n    phoneCountry: PHONE_COUNTRY,\n\n    // Address\n    address1: z.string().trim().max(100).optional().or(z.literal(\"\")),\n    address2: z.string().trim().max(100).optional().or(z.literal(\"\")),\n    city: z.string().trim().max(60).optional().or(z.literal(\"\")),\n    region: z.string().trim().max(40).optional().or(z.literal(\"\")),\n    postal: z.string().trim().min(3, \"Enter postal/ZIP\"),\n    country: z.string().trim().length(2, \"Use ISO2 (e.g., CA)\").optional(),\n\n    // Status wizard (updated)\n    citizenship: z.enum([\"CA\", \"Other\"]).default(\"CA\"),\n    residencyCA: z\n      .enum([\"Citizen\", \"PR\", \"Work Permit\", \"Study Permit\"])\n      .default(\"Citizen\"),\n    prNumber: z.string().optional(), // PR card number (Document No.)\n    permitType: z.string().optional(),\n    uci: z.string().optional(),\n\n    // Passport (no expiry anymore)\n    passportCountry: z.string().optional(),\n    passportNumber: z.string().optional(),\n\n    // Languages\n    englishLevel: ENGLISH_LEVEL,\n    otherLanguages: z\n      .array(\n        z.object({\n          language: z.string().min(1, \"Choose a language\"),\n          level: ENGLISH_LEVEL,\n        }),\n      )\n      .max(20)\n      .optional(),\n\n    // Work experience\n    work: z\n      .array(\n        z\n          .object({\n            company: z.string().trim().min(2, \"Enter company\"),\n            role: z.string().trim().min(2, \"Enter role\"),\n            start: dateISO,\n            end: dateISO,\n          })\n          .refine(\n            (w) => new Date(w.start) <= new Date(w.end),\n            { message: \"From must be before To\", path: [\"end\"] },\n          ),\n      )\n      .max(10)\n      .optional(),\n\n    // Consent\n    consentAbstract: z.boolean().refine((v) => v === true, {\n      message: \"Consent is required\",\n    }),\n    consentName: NAME,\n    consentDate: dateISO,\n    certifyAccurate: z.boolean().refine((v) => v === true, {\n      message: \"You must certify accuracy\",\n    }),\n\n    // Documents\n    docLicenseFront: FILE_REQUIRED,\n    docLicenseBack: FILE_REQUIRED,\n    docHealthCard: FILE_REQUIRED,\n    docPassport: z.instanceof(File).optional(),\n    docPR: z.instanceof(File).optional(),\n    docPermit: z.instanceof(File).optional(),\n  })\n  .superRefine((v, ctx) => {\n    // Dates: age >= 16; licence expiry in future\n    const today = new Date();\n    const yyyy = today.getFullYear();\n    const mm = today.getMonth();\n    const dd = today.getDate();\n    const minDob = new Date(yyyy - 16, mm, dd);\n    const dob = new Date(v.dob);\n    const exp = new Date(v.licenseExpiry);\n    if (isNaN(dob.getTime()) || dob > minDob) {\n      ctx.addIssue({\n        code: \"custom\",\n        path: [\"dob\"],\n        message: \"Driver must be at least 16 years old\",\n      });\n    }\n    if (isNaN(exp.getTime()) || exp < new Date(yyyy, mm, dd)) {\n      ctx.addIssue({\n        code: \"custom\",\n        path: [\"licenseExpiry\"],\n        message: \"Expiry must be in the future\",\n      });\n    }\n\n    // Licence number & class checks\n    if (!isValidLicence(v.jurisdiction, v.licenseNo)) {\n      ctx.addIssue({\n        code: \"custom\",\n        path: [\"licenseNo\"],\n        message: \"Number doesn’t match jurisdiction format\",\n      });\n    }\n    const allowed = classesFor(v.jurisdiction);\n    if (allowed.length > 0 && !allowed.includes(v.licenseClass)) {\n      ctx.addIssue({\n        code: \"custom\",\n        path: [\"licenseClass\"],\n        message: `Select a valid class for ${v.jurisdiction}`,\n      });\n    }\n\n    // Postal: CA or US ZIP (fallback)\n    const ca = detectCA(v.postal);\n    if (!ca.ok && !isUSZip(v.postal)) {\n      ctx.addIssue({\n        code: \"custom\",\n        path: [\"postal\"],\n        message: \"Enter a valid Canadian postal code or US ZIP\",\n      });\n    }\n\n    // Status logic\n    if (v.citizenship === \"CA\") {\n      if (v.residencyCA !== \"Citizen\") {\n        ctx.addIssue({\n          code: \"custom\",\n          path: [\"residencyCA\"],\n          message: \"Canadian citizens must select Citizen\",\n        });\n      }\n    } else {\n      // Non-Canadian → passport is required (country + number + document)\n      if (!v.passportCountry || !isCountry(v.passportCountry)) {\n        ctx.addIssue({\n          code: \"custom\",\n          path: [\"passportCountry\"],\n          message: \"Select a valid country\",\n        });\n      }\n      if (!v.passportNumber || !v.passportNumber.trim()) {\n        ctx.addIssue({\n          code: \"custom\",\n          path: [\"passportNumber\"],\n          message: \"Enter passport number\",\n        });\n      } else if (v.passportCountry) {\n        // Prefer country-specific validation if available\n        const ok =\n          isValidPassport(v.passportCountry, v.passportNumber) ||\n          PASSPORT_NUMBER_GENERIC.safeParse(v.passportNumber).success;\n        if (!ok) {\n          const pat = passportPatternFor(v.passportCountry);\n          ctx.addIssue({\n            code: \"custom\",\n            path: [\"passportNumber\"],\n            message: `Format doesn’t match (${pat.hint || \"6–10 letters/digits\"})`,\n          });\n        }\n      }\n      if (!v.docPassport) {\n        ctx.addIssue({\n          code: \"custom\",\n          path: [\"docPassport\"],\n          message: \"Upload passport image\",\n        });\n      }\n    }\n\n    // PR holders → PR card number required (AB12345678)\n    if (v.residencyCA === \"PR\") {\n      if (!v.prNumber || !PR_CARD_NUMBER.safeParse(v.prNumber).success) {\n        ctx.addIssue({\n          code: \"custom\",\n          path: [\"prNumber\"],\n          message: \"PR card number must look like AB12345678\",\n        });\n      }\n      if (!v.docPR) {\n        ctx.addIssue({\n          code: \"custom\",\n          path: [\"docPR\"],\n          message: \"Upload PR card image\",\n        });\n      }\n    }\n\n    // Permits → document required; permitType only for Work Permit (UI handles hiding for Study)\n    if (v.residencyCA === \"Work Permit\" || v.residencyCA === \"Study Permit\") {\n      if (!v.docPermit) {\n        ctx.addIssue({\n          code: \"custom\",\n          path: [\"docPermit\"],\n          message: \"Upload permit document image\",\n        });\n      }\n      // Do not force permitType for Study Permit\n      if (v.residencyCA === \"Work Permit\" && !v.permitType?.trim()) {\n        ctx.addIssue({\n          code: \"custom\",\n          path: [\"permitType\"],\n          message: \"Select permit type\",\n        });\n      }\n    }\n\n    // Files: type/size guard (client-side types exist)\n    ([\n      [\"docLicenseFront\", v.docLicenseFront],\n      [\"docLicenseBack\", v.docLicenseBack],\n      [\"docHealthCard\", v.docHealthCard],\n      [\"docPassport\", v.docPassport],\n      [\"docPR\", v.docPR],\n      [\"docPermit\", v.docPermit],\n    ] as const).forEach(([path, f]) => {\n      const file = f as File | undefined;\n      if (file) {\n        const okType = [\"image/jpeg\", \"image/png\"].includes(file.type);\n        const okSize = file.size <= 4 * 1024 * 1024;\n        if (!okType || !okSize) {\n          ctx.addIssue({\n            code: \"custom\",\n            path: [path],\n            message: \"Upload JPG/PNG ≤ 4MB\",\n          });\n        }\n      }\n    });\n  });\n\nexport type RegisterValues = z.infer<typeof RegisterSchema>;\n\n/** Normalize before storage (keeps UI constraints intact) */\nexport function normalizeForStorage<T extends {\n  licenseNo: string;\n  phone: string;\n  phoneCountry: \"CA\";\n  passportCountry?: string;\n  passportNumber?: string;\n  prNumber?: string;\n  uci?: string;\n}>(values: T): T {\n  const out = { ...values };\n  // Licence\n  out.licenseNo = normalizedLicence(out.licenseNo);\n  // Phone: combine to E.164 (+1 + 10 digits)\n  if (out.phoneCountry === \"CA\" && /^\\d{10}$/.test(out.phone)) {\n    (out as any).phone = `+1${out.phone}`;\n  }\n  // Passport\n  if (out.passportCountry && out.passportNumber) {\n    (out as any).passportNumber = normalizePassport(out.passportNumber);\n  } else {\n    (out as any).passportNumber = undefined;\n  }\n  // PR card number normalized uppercase\n  if (out.prNumber) (out as any).prNumber = out.prNumber.toUpperCase();\n  // UCI digits only (if provided)\n  if (out.uci) (out as any).uci = out.uci.replace(/\\D/g, \"\");\n  return out;\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 836, "column": 0}, "map": {"version":3,"sources":["file:///Users/dvskrishna/Business/innovyom/Unify_Trucking_DB/unify_trucking_db/components/driver/DocUploadField.tsx"],"sourcesContent":["\"use client\";\n\nimport { useId, useState } from \"react\";\n\nconst ACCEPT = [\"image/jpeg\", \"image/png\"]; // JPG/PNG only\nconst MAX = 4 * 1024 * 1024; // 4 MB\n\nexport default function DocUploadField({\n  label,\n  hint,\n  value,\n  onChange,\n  id,\n  required = false,\n}: {\n  label: string;\n  hint?: string;\n  value?: File | null;\n  onChange: (f: File | null) => void;\n  id?: string;\n  required?: boolean;\n}) {\n  const generatedId = useId();\n  const inputId = id ?? generatedId;\n  const [err, setErr] = useState<string | null>(null);\n\n  function handle(e: React.ChangeEvent<HTMLInputElement>) {\n    const f = e.target.files?.[0] ?? null;\n    if (!f) {\n      if (required) setErr(`${label} is required`);\n      return;\n    }\n    if (!ACCEPT.includes(f.type)) {\n      setErr(\"Only JPG or PNG accepted\");\n      return;\n    }\n    if (f.size > MAX) {\n      setErr(\"File must be ≤ 4 MB\");\n      return;\n    }\n    setErr(null);\n    onChange(f);\n  }\n\n  function clear() {\n    onChange(null);\n    setErr(required ? `${label} is required` : null);\n  }\n\n  return (\n    <div className=\"space-y-2\">\n      <label\n        htmlFor={inputId}\n        className=\"block text-sm font-medium text-slate-700\"\n      >\n        {label} {required && <span className=\"text-rose-600\">*</span>}\n      </label>\n      <div className=\"flex items-center gap-3\">\n        <input\n          id={inputId}\n          type=\"file\"\n          accept={ACCEPT.join(\",\")}\n          className=\"block w-full text-sm file:mr-4 file:rounded file:border-0 file:bg-slate-900 file:px-3 file:py-2 file:text-white hover:file:bg-slate-800\"\n          onChange={handle}\n        />\n      </div>\n      {hint && <p className=\"text-xs text-slate-500\">{hint}</p>}\n      {err && (\n        <p className=\"text-xs text-rose-600\" aria-live=\"polite\">\n          {err}\n        </p>\n      )}\n      {value && (\n        <div className=\"flex items-center gap-3 rounded border border-slate-200 p-2 text-xs text-slate-600\">\n          {value.name} • {(value.size / 1024 / 1024).toFixed(1)} MB\n          <button\n            type=\"button\"\n            className=\"ml-auto text-xs underline\"\n            onClick={clear}\n          >\n            Remove\n          </button>\n        </div>\n      )}\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;;AAEA;;;AAFA;;AAIA,MAAM,SAAS;IAAC;IAAc;CAAY,EAAE,eAAe;AAC3D,MAAM,MAAM,IAAI,OAAO,MAAM,OAAO;AAErB,SAAS,eAAe,KActC;QAdsC,EACrC,KAAK,EACL,IAAI,EACJ,KAAK,EACL,QAAQ,EACR,EAAE,EACF,WAAW,KAAK,EAQjB,GAdsC;;IAerC,MAAM,cAAc,IAAA,qSAAK;IACzB,MAAM,UAAU,eAAA,gBAAA,KAAM;IACtB,MAAM,CAAC,KAAK,OAAO,GAAG,IAAA,wSAAQ,EAAgB;IAE9C,SAAS,OAAO,CAAsC;YAC1C;YAAA;QAAV,MAAM,IAAI,CAAA,oBAAA,kBAAA,EAAE,MAAM,CAAC,KAAK,cAAd,sCAAA,eAAgB,CAAC,EAAE,cAAnB,8BAAA,mBAAuB;QACjC,IAAI,CAAC,GAAG;YACN,IAAI,UAAU,OAAO,AAAC,GAAQ,OAAN,OAAM;YAC9B;QACF;QACA,IAAI,CAAC,OAAO,QAAQ,CAAC,EAAE,IAAI,GAAG;YAC5B,OAAO;YACP;QACF;QACA,IAAI,EAAE,IAAI,GAAG,KAAK;YAChB,OAAO;YACP;QACF;QACA,OAAO;QACP,SAAS;IACX;IAEA,SAAS;QACP,SAAS;QACT,OAAO,WAAW,AAAC,GAAQ,OAAN,OAAM,kBAAgB;IAC7C;IAEA,qBACE,4TAAC;QAAI,WAAU;;0BACb,4TAAC;gBACC,SAAS;gBACT,WAAU;;oBAET;oBAAM;oBAAE,0BAAY,4TAAC;wBAAK,WAAU;kCAAgB;;;;;;;;;;;;0BAEvD,4TAAC;gBAAI,WAAU;0BACb,cAAA,4TAAC;oBACC,IAAI;oBACJ,MAAK;oBACL,QAAQ,OAAO,IAAI,CAAC;oBACpB,WAAU;oBACV,UAAU;;;;;;;;;;;YAGb,sBAAQ,4TAAC;gBAAE,WAAU;0BAA0B;;;;;;YAC/C,qBACC,4TAAC;gBAAE,WAAU;gBAAwB,aAAU;0BAC5C;;;;;;YAGJ,uBACC,4TAAC;gBAAI,WAAU;;oBACZ,MAAM,IAAI;oBAAC;oBAAI,CAAC,MAAM,IAAI,GAAG,OAAO,IAAI,EAAE,OAAO,CAAC;oBAAG;kCACtD,4TAAC;wBACC,MAAK;wBACL,WAAU;wBACV,SAAS;kCACV;;;;;;;;;;;;;;;;;;AAOX;GA/EwB;;QAeF,qSAAK;;;KAfH","debugId":null}},
    {"offset": {"line": 983, "column": 0}, "map": {"version":3,"sources":["file:///Users/dvskrishna/Business/innovyom/Unify_Trucking_DB/unify_trucking_db/components/pdf/DriverCardPDF.tsx"],"sourcesContent":["/* eslint-disable jsx-a11y/alt-text */\n\"use client\";\nimport { Document, Page, View, Text, Image, StyleSheet } from \"@react-pdf/renderer\";\n\nconst styles = StyleSheet.create({\n  page: { padding: 20, fontSize: 10, color: \"#0A0F1F\" },\n  card: { borderWidth: 1, borderColor: \"#e5e7eb\", padding: 12, borderRadius: 6 },\n  row: { flexDirection: \"row\", gap: 10 },\n  col: { flexGrow: 1 },\n  title: { fontSize: 14, marginBottom: 6 },\n  label: { color: \"#6b7280\" },\n});\n\nexport default function DriverCardPDF({\n  name,\n  qrPng,\n}: {\n  name: string;\n  qrPng: string;\n}) {\n  return (\n    <Document>\n      <Page size=\"A6\" style={styles.page}>\n        <View style={styles.card}>\n          <Text style={styles.title}>Driver Identity Card</Text>\n          <View style={styles.row}>\n            <View style={styles.col}>\n              <Text>\n                <Text style={styles.label}>Name: </Text>{name}\n              </Text>\n            </View>\n            <Image src={qrPng} style={{ width: 120, height: 120 }} />\n          </View>\n          <Text style={{ marginTop: 8, color: \"#6b7280\" }}>\n            Scan for live verification. QR encodes only a random ID; no personal details.\n          </Text>\n        </View>\n      </Page>\n    </Document>\n  );\n}\n"],"names":[],"mappings":"AAAA,oCAAoC;;;;;AAEpC;AAAA;AADA;;;AAGA,MAAM,SAAS,0SAAU,CAAC,MAAM,CAAC;IAC/B,MAAM;QAAE,SAAS;QAAI,UAAU;QAAI,OAAO;IAAU;IACpD,MAAM;QAAE,aAAa;QAAG,aAAa;QAAW,SAAS;QAAI,cAAc;IAAE;IAC7E,KAAK;QAAE,eAAe;QAAO,KAAK;IAAG;IACrC,KAAK;QAAE,UAAU;IAAE;IACnB,OAAO;QAAE,UAAU;QAAI,cAAc;IAAE;IACvC,OAAO;QAAE,OAAO;IAAU;AAC5B;AAEe,SAAS,cAAc,KAMrC;QANqC,EACpC,IAAI,EACJ,KAAK,EAIN,GANqC;IAOpC,qBACE,4TAAC,oPAAQ;kBACP,cAAA,4TAAC,gPAAI;YAAC,MAAK;YAAK,OAAO,OAAO,IAAI;sBAChC,cAAA,4TAAC,gPAAI;gBAAC,OAAO,OAAO,IAAI;;kCACtB,4TAAC,gPAAI;wBAAC,OAAO,OAAO,KAAK;kCAAE;;;;;;kCAC3B,4TAAC,gPAAI;wBAAC,OAAO,OAAO,GAAG;;0CACrB,4TAAC,gPAAI;gCAAC,OAAO,OAAO,GAAG;0CACrB,cAAA,4TAAC,gPAAI;;sDACH,4TAAC,gPAAI;4CAAC,OAAO,OAAO,KAAK;sDAAE;;;;;;wCAAc;;;;;;;;;;;;0CAG7C,4TAAC,iPAAK;gCAAC,KAAK;gCAAO,OAAO;oCAAE,OAAO;oCAAK,QAAQ;gCAAI;;;;;;;;;;;;kCAEtD,4TAAC,gPAAI;wBAAC,OAAO;4BAAE,WAAW;4BAAG,OAAO;wBAAU;kCAAG;;;;;;;;;;;;;;;;;;;;;;AAO3D;KA3BwB","debugId":null}},
    {"offset": {"line": 1119, "column": 0}, "map": {"version":3,"sources":["file:///Users/dvskrishna/Business/innovyom/Unify_Trucking_DB/unify_trucking_db/lib/qr.ts"],"sourcesContent":["import QRCode from \"qrcode\";\n\n// Now the QR encodes only a version + a URL with a random qrid.\n// No licence, no jurisdiction, no PII.\nexport function buildQrPayload(input: { qrid: string; origin?: string }) {\n  const origin =\n    input.origin ?? (typeof window !== \"undefined\" ? window.location.origin : \"https://example.org\");\n  return {\n    v: 1,\n    url: `${origin}/v/${input.qrid}`,\n  };\n}\n\nexport async function makeQrPng(payload: object) {\n  return QRCode.toDataURL(JSON.stringify(payload), {\n    errorCorrectionLevel: \"M\",\n    margin: 1,\n    scale: 6,\n  });\n}\n"],"names":[],"mappings":";;;;;;AAAA;;AAIO,SAAS,eAAe,KAAwC;QAEnE;IADF,MAAM,SACJ,CAAA,gBAAA,MAAM,MAAM,cAAZ,2BAAA,gBAAiB,uCAAgC,OAAO,QAAQ,CAAC,MAAM,GAAG;IAC5E,OAAO;QACL,GAAG;QACH,KAAK,AAAC,GAAc,OAAZ,QAAO,OAAgB,OAAX,MAAM,IAAI;IAChC;AACF;AAEO,eAAe,UAAU,OAAe;IAC7C,OAAO,yMAAM,CAAC,SAAS,CAAC,KAAK,SAAS,CAAC,UAAU;QAC/C,sBAAsB;QACtB,QAAQ;QACR,OAAO;IACT;AACF","debugId":null}},
    {"offset": {"line": 1149, "column": 0}, "map": {"version":3,"sources":["file:///Users/dvskrishna/Business/innovyom/Unify_Trucking_DB/unify_trucking_db/lib/demo-store-remote.ts"],"sourcesContent":["export type DriverSnapshot = {\n  qrid: string;\n  name: string;\n  jurisdiction: string;\n  licenseNo: string;\n  licenseClass: string;\n  licenseExpiry: string;\n  issuedAt: string; // ISO\n};\n\nexport async function saveSnapshotRemote(s: DriverSnapshot): Promise<void> {\n  const res = await fetch(\"/api/demo/snapshots\", {\n    method: \"POST\",\n    headers: { \"content-type\": \"application/json\" },\n    body: JSON.stringify(s),\n    cache: \"no-store\",\n  });\n  if (!res.ok) {\n    const j: unknown = await res.json().catch(() => null as unknown);\n    const msg = getErrorMessage(j) ?? `Failed to save snapshot (${res.status})`;\n    throw new Error(msg);\n  }\n}\n\nexport async function loadSnapshotRemote(qrid: string): Promise<DriverSnapshot | null> {\n  const res = await fetch(`/api/demo/snapshots/${encodeURIComponent(qrid)}`, {\n    method: \"GET\",\n    cache: \"no-store\",\n  });\n  if (res.status === 404) return null;\n  if (!res.ok) throw new Error(`Fetch failed (${res.status})`);\n  return (await res.json()) as DriverSnapshot;\n}\n\nfunction getErrorMessage(x: unknown): string | null {\n  if (!x || typeof x !== \"object\") return null;\n  const rec = x as Record<string, unknown>;\n  const e = rec[\"error\"];\n  return typeof e === \"string\" ? e : null;\n}\n"],"names":[],"mappings":";;;;;;AAUO,eAAe,mBAAmB,CAAiB;IACxD,MAAM,MAAM,MAAM,MAAM,uBAAuB;QAC7C,QAAQ;QACR,SAAS;YAAE,gBAAgB;QAAmB;QAC9C,MAAM,KAAK,SAAS,CAAC;QACrB,OAAO;IACT;IACA,IAAI,CAAC,IAAI,EAAE,EAAE;QACX,MAAM,IAAa,MAAM,IAAI,IAAI,GAAG,KAAK,CAAC,IAAM;YACpC;QAAZ,MAAM,MAAM,CAAA,mBAAA,gBAAgB,gBAAhB,8BAAA,mBAAsB,AAAC,4BAAsC,OAAX,IAAI,MAAM,EAAC;QACzE,MAAM,IAAI,MAAM;IAClB;AACF;AAEO,eAAe,mBAAmB,IAAY;IACnD,MAAM,MAAM,MAAM,MAAM,AAAC,uBAA+C,OAAzB,mBAAmB,QAAS;QACzE,QAAQ;QACR,OAAO;IACT;IACA,IAAI,IAAI,MAAM,KAAK,KAAK,OAAO;IAC/B,IAAI,CAAC,IAAI,EAAE,EAAE,MAAM,IAAI,MAAM,AAAC,iBAA2B,OAAX,IAAI,MAAM,EAAC;IACzD,OAAQ,MAAM,IAAI,IAAI;AACxB;AAEA,SAAS,gBAAgB,CAAU;IACjC,IAAI,CAAC,KAAK,OAAO,MAAM,UAAU,OAAO;IACxC,MAAM,MAAM;IACZ,MAAM,IAAI,GAAG,CAAC,QAAQ;IACtB,OAAO,OAAO,MAAM,WAAW,IAAI;AACrC","debugId":null}},
    {"offset": {"line": 1193, "column": 0}, "map": {"version":3,"sources":["file:///Users/dvskrishna/Business/innovyom/Unify_Trucking_DB/unify_trucking_db/lib/uuid.ts"],"sourcesContent":["// RFC4122 v4 UUID with fallbacks for older browsers / non-secure contexts.\nexport function uuidv4(): string {\n  // Modern browsers with Crypto.randomUUID\n  if (typeof crypto !== \"undefined\") {\n    const c = crypto as Crypto & { randomUUID?: () => string };\n    if (typeof c.randomUUID === \"function\") {\n      return c.randomUUID();\n    }\n    // Web Crypto fallback\n    if (typeof c.getRandomValues === \"function\") {\n      const bytes = new Uint8Array(16);\n      c.getRandomValues(bytes);\n      // Per RFC4122 section 4.4\n      const b6 = bytes[6] ?? 0;\n      bytes[6] = (b6 & 0x0f) | 0x40; // version 4\n      const b8 = bytes[8] ?? 0;\n      bytes[8] = (b8 & 0x3f) | 0x80; // variant 10\n      const hex = Array.from(bytes, (b) => b.toString(16).padStart(2, \"0\")).join(\"\");\n      return `${hex.slice(0, 8)}-${hex.slice(8, 12)}-${hex.slice(12, 16)}-${hex.slice(16, 20)}-${hex.slice(20)}`;\n    }\n  }\n  // Last-resort (not cryptographically strong)\n  return \"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx\".replace(/[xy]/g, (c) => {\n    const r = (Math.random() * 16) | 0;\n    const v = c === \"x\" ? r : (r & 0x3) | 0x8;\n    return v.toString(16);\n  });\n}\n"],"names":[],"mappings":"AAAA,2EAA2E;;;;;AACpE,SAAS;IACd,yCAAyC;IACzC,IAAI,OAAO,WAAW,aAAa;QACjC,MAAM,IAAI;QACV,IAAI,OAAO,EAAE,UAAU,KAAK,YAAY;YACtC,OAAO,EAAE,UAAU;QACrB;QACA,sBAAsB;QACtB,IAAI,OAAO,EAAE,eAAe,KAAK,YAAY;YAC3C,MAAM,QAAQ,IAAI,WAAW;YAC7B,EAAE,eAAe,CAAC;gBAEP;YADX,0BAA0B;YAC1B,MAAM,KAAK,CAAA,UAAA,KAAK,CAAC,EAAE,cAAR,qBAAA,UAAY;YACvB,KAAK,CAAC,EAAE,GAAG,AAAC,KAAK,OAAQ,MAAM,YAAY;gBAChC;YAAX,MAAM,KAAK,CAAA,WAAA,KAAK,CAAC,EAAE,cAAR,sBAAA,WAAY;YACvB,KAAK,CAAC,EAAE,GAAG,AAAC,KAAK,OAAQ,MAAM,aAAa;YAC5C,MAAM,MAAM,MAAM,IAAI,CAAC,OAAO,CAAC,IAAM,EAAE,QAAQ,CAAC,IAAI,QAAQ,CAAC,GAAG,MAAM,IAAI,CAAC;YAC3E,OAAO,AAAC,GAAqB,OAAnB,IAAI,KAAK,CAAC,GAAG,IAAG,KAAuB,OAApB,IAAI,KAAK,CAAC,GAAG,KAAI,KAAwB,OAArB,IAAI,KAAK,CAAC,IAAI,KAAI,KAAwB,OAArB,IAAI,KAAK,CAAC,IAAI,KAAI,KAAiB,OAAd,IAAI,KAAK,CAAC;QACvG;IACF;IACA,6CAA6C;IAC7C,OAAO,uCAAuC,OAAO,CAAC,SAAS,CAAC;QAC9D,MAAM,IAAI,AAAC,KAAK,MAAM,KAAK,KAAM;QACjC,MAAM,IAAI,MAAM,MAAM,IAAI,AAAC,IAAI,MAAO;QACtC,OAAO,EAAE,QAAQ,CAAC;IACpB;AACF","debugId":null}},
    {"offset": {"line": 1234, "column": 0}, "map": {"version":3,"sources":["file:///Users/dvskrishna/Business/innovyom/Unify_Trucking_DB/unify_trucking_db/lib/names.ts"],"sourcesContent":["export function titleCaseName(s: string) {\n  return s\n    .trim()\n    .toLowerCase()\n    .replace(/\\b[\\p{L}\\p{M}]+/gu, (w) => (w[0]?.toUpperCase() ?? \"\") + w.slice(1));\n}\nexport function canonicalKey(s: string) {\n  // Uppercase, strip diacritics, collapse spaces\n  return s\n    .normalize(\"NFD\")\n    .replace(/\\p{Diacritic}/gu, \"\")\n    .toUpperCase()\n    .replace(/\\s+/g, \" \")\n    .trim();\n}\n\n"],"names":[],"mappings":";;;;;;AAAO,SAAS,cAAc,CAAS;IACrC,OAAO,EACJ,IAAI,GACJ,WAAW,GACX,OAAO,CAAC,oCAAqB,CAAC;YAAO;YAAA;eAAD,CAAC,CAAA,mBAAA,MAAA,CAAC,CAAC,EAAE,cAAJ,0BAAA,IAAM,WAAW,gBAAjB,6BAAA,kBAAuB,EAAE,IAAI,EAAE,KAAK,CAAC;;AAC/E;AACO,SAAS,aAAa,CAAS;IACpC,+CAA+C;IAC/C,OAAO,EACJ,SAAS,CAAC,OACV,OAAO,CAAC,gCAAmB,IAC3B,WAAW,GACX,OAAO,CAAC,QAAQ,KAChB,IAAI;AACT","debugId":null}},
    {"offset": {"line": 1258, "column": 0}, "map": {"version":3,"sources":["file:///Users/dvskrishna/Business/innovyom/Unify_Trucking_DB/unify_trucking_db/components/inputs/NameFields.tsx"],"sourcesContent":["\"use client\";\n\nimport { titleCaseName, canonicalKey } from \"@/lib/names\";\nimport type {\n  UseFormRegister,\n  UseFormSetValue,\n  FieldErrors,\n} from \"react-hook-form\";\nimport type { RegisterValues } from \"@/lib/register-schemas\";\n\nconst NAME_ALLOWED = /[A-Za-zÀ-ÖØ-öø-ÿ' -]/; // single char test\nconst SANITIZE = /[^A-Za-zÀ-ÖØ-öø-ÿ' -]+/g; // strip anything not allowed\nconst MAX_LEN = 60;\n\nexport default function NameFields({\n  register,\n  setValue,\n  errors,\n}: {\n  register: UseFormRegister<RegisterValues>;\n  setValue: UseFormSetValue<RegisterValues>;\n  errors: FieldErrors<RegisterValues>;\n}) {\n  function onChangeField(\n    e: React.ChangeEvent<HTMLInputElement>,\n    field: \"givenName\" | \"middleName\" | \"surname\",\n  ) {\n    // live sanitize: keep allowed chars, cap length\n    let v = e.target.value.replace(SANITIZE, \"\");\n    if (v.length > MAX_LEN) v = v.slice(0, MAX_LEN);\n    setValue(field, v, { shouldValidate: true });\n  }\n\n  function onBlurFormat(\n    e: React.FocusEvent<HTMLInputElement>,\n    field: \"givenName\" | \"middleName\" | \"surname\",\n    withKey?: \"givenNameKey\" | \"surnameKey\",\n  ) {\n    const t = titleCaseName(e.target.value);\n    setValue(field, t, { shouldValidate: true });\n    if (withKey) setValue(withKey, canonicalKey(t));\n  }\n\n  function blockInvalidKey(e: React.KeyboardEvent<HTMLInputElement>) {\n    // allow control keys\n    if (\n      e.key === \"Backspace\" ||\n      e.key === \"Delete\" ||\n      e.key === \"ArrowLeft\" ||\n      e.key === \"ArrowRight\" ||\n      e.key === \"Tab\" ||\n      e.metaKey ||\n      e.ctrlKey\n    ) {\n      return;\n    }\n    if (!NAME_ALLOWED.test(e.key)) {\n      e.preventDefault();\n    }\n  }\n\n  return (\n    <div className=\"grid gap-4 sm:grid-cols-3\">\n      <Field\n        label=\"Given name\"\n        err={errors.givenName?.message as string | undefined}\n      >\n        <input\n          {...register(\"givenName\")}\n          className=\"mt-1 w-full rounded border border-slate-300 p-2\"\n          maxLength={MAX_LEN}\n          onKeyDown={blockInvalidKey}\n          onChange={(e) => onChangeField(e, \"givenName\")}\n          onBlur={(e) => onBlurFormat(e, \"givenName\", \"givenNameKey\")}\n          autoComplete=\"given-name\"\n        />\n      </Field>\n\n      <Field\n        label=\"Middle (optional)\"\n        err={errors.middleName?.message as string | undefined}\n      >\n        <input\n          {...register(\"middleName\")}\n          className=\"mt-1 w-full rounded border border-slate-300 p-2\"\n          maxLength={MAX_LEN}\n          onKeyDown={blockInvalidKey}\n          onChange={(e) => onChangeField(e, \"middleName\")}\n          onBlur={(e) => onBlurFormat(e, \"middleName\")}\n          autoComplete=\"additional-name\"\n        />\n      </Field>\n\n      <Field\n        label=\"Surname\"\n        err={errors.surname?.message as string | undefined}\n      >\n        <input\n          {...register(\"surname\")}\n          className=\"mt-1 w-full rounded border border-slate-300 p-2\"\n          maxLength={MAX_LEN}\n          onKeyDown={blockInvalidKey}\n          onChange={(e) => onChangeField(e, \"surname\")}\n          onBlur={(e) => onBlurFormat(e, \"surname\", \"surnameKey\")}\n          autoComplete=\"family-name\"\n        />\n      </Field>\n    </div>\n  );\n}\n\nfunction Field({\n  label,\n  err,\n  children,\n}: {\n  label: string;\n  err?: string;\n  children: React.ReactNode;\n}) {\n  return (\n    <label className=\"block\">\n      <span className=\"block text-sm text-slate-700\">{label}</span>\n      {children}\n      {err && <p className=\"text-xs text-rose-600\">{err}</p>}\n    </label>\n  );\n}\n"],"names":[],"mappings":";;;;;AAEA;AAFA;;;AAUA,MAAM,eAAe,wBAAwB,mBAAmB;AAChE,MAAM,WAAW,2BAA2B,6BAA6B;AACzE,MAAM,UAAU;AAED,SAAS,WAAW,KAQlC;QARkC,EACjC,QAAQ,EACR,QAAQ,EACR,MAAM,EAKP,GARkC;QAmDtB,mBAeA,oBAeA;IAxEX,SAAS,cACP,CAAsC,EACtC,KAA6C;QAE7C,gDAAgD;QAChD,IAAI,IAAI,EAAE,MAAM,CAAC,KAAK,CAAC,OAAO,CAAC,UAAU;QACzC,IAAI,EAAE,MAAM,GAAG,SAAS,IAAI,EAAE,KAAK,CAAC,GAAG;QACvC,SAAS,OAAO,GAAG;YAAE,gBAAgB;QAAK;IAC5C;IAEA,SAAS,aACP,CAAqC,EACrC,KAA6C,EAC7C,OAAuC;QAEvC,MAAM,IAAI,IAAA,gIAAa,EAAC,EAAE,MAAM,CAAC,KAAK;QACtC,SAAS,OAAO,GAAG;YAAE,gBAAgB;QAAK;QAC1C,IAAI,SAAS,SAAS,SAAS,IAAA,+HAAY,EAAC;IAC9C;IAEA,SAAS,gBAAgB,CAAwC;QAC/D,qBAAqB;QACrB,IACE,EAAE,GAAG,KAAK,eACV,EAAE,GAAG,KAAK,YACV,EAAE,GAAG,KAAK,eACV,EAAE,GAAG,KAAK,gBACV,EAAE,GAAG,KAAK,SACV,EAAE,OAAO,IACT,EAAE,OAAO,EACT;YACA;QACF;QACA,IAAI,CAAC,aAAa,IAAI,CAAC,EAAE,GAAG,GAAG;YAC7B,EAAE,cAAc;QAClB;IACF;IAEA,qBACE,4TAAC;QAAI,WAAU;;0BACb,4TAAC;gBACC,OAAM;gBACN,GAAG,GAAE,oBAAA,OAAO,SAAS,cAAhB,wCAAA,kBAAkB,OAAO;0BAE9B,cAAA,4TAAC;oBACE,GAAG,SAAS,YAAY;oBACzB,WAAU;oBACV,WAAW;oBACX,WAAW;oBACX,UAAU,CAAC,IAAM,cAAc,GAAG;oBAClC,QAAQ,CAAC,IAAM,aAAa,GAAG,aAAa;oBAC5C,cAAa;;;;;;;;;;;0BAIjB,4TAAC;gBACC,OAAM;gBACN,GAAG,GAAE,qBAAA,OAAO,UAAU,cAAjB,yCAAA,mBAAmB,OAAO;0BAE/B,cAAA,4TAAC;oBACE,GAAG,SAAS,aAAa;oBAC1B,WAAU;oBACV,WAAW;oBACX,WAAW;oBACX,UAAU,CAAC,IAAM,cAAc,GAAG;oBAClC,QAAQ,CAAC,IAAM,aAAa,GAAG;oBAC/B,cAAa;;;;;;;;;;;0BAIjB,4TAAC;gBACC,OAAM;gBACN,GAAG,GAAE,kBAAA,OAAO,OAAO,cAAd,sCAAA,gBAAgB,OAAO;0BAE5B,cAAA,4TAAC;oBACE,GAAG,SAAS,UAAU;oBACvB,WAAU;oBACV,WAAW;oBACX,WAAW;oBACX,UAAU,CAAC,IAAM,cAAc,GAAG;oBAClC,QAAQ,CAAC,IAAM,aAAa,GAAG,WAAW;oBAC1C,cAAa;;;;;;;;;;;;;;;;;AAKvB;KA/FwB;AAiGxB,SAAS,MAAM,KAQd;QARc,EACb,KAAK,EACL,GAAG,EACH,QAAQ,EAKT,GARc;IASb,qBACE,4TAAC;QAAM,WAAU;;0BACf,4TAAC;gBAAK,WAAU;0BAAgC;;;;;;YAC/C;YACA,qBAAO,4TAAC;gBAAE,WAAU;0BAAyB;;;;;;;;;;;;AAGpD;MAhBS","debugId":null}},
    {"offset": {"line": 1411, "column": 0}, "map": {"version":3,"sources":["file:///Users/dvskrishna/Business/innovyom/Unify_Trucking_DB/unify_trucking_db/components/inputs/PhoneInput.tsx"],"sourcesContent":["\"use client\";\n\nimport { useState } from \"react\";\nimport type {\n  UseFormRegister,\n  UseFormSetValue,\n  UseFormWatch,\n  FieldErrors,\n} from \"react-hook-form\";\nimport type { RegisterValues } from \"@/lib/register-schemas\";\n\nexport default function PhoneInput({\n  register,\n  setValue,\n  watch,\n  errors,\n}: {\n  register: UseFormRegister<RegisterValues>;\n  setValue: UseFormSetValue<RegisterValues>;\n  watch: UseFormWatch<RegisterValues>;\n  errors: FieldErrors<RegisterValues>;\n}) {\n  const [display, setDisplay] = useState(\"\");\n  const phoneCountry = watch(\"phoneCountry\") as \"CA\" | \"US\" | undefined;\n\n  return (\n    <div className=\"grid gap-3 sm:grid-cols-[8rem_1fr]\">\n      <label className=\"block\">\n        <span className=\"block text-sm text-slate-700\">Country</span>\n        <select\n          {...register(\"phoneCountry\")}\n          defaultValue=\"CA\"\n          className=\"mt-1 w-full rounded border border-slate-300 p-2\"\n        >\n          <option value=\"CA\">Canada (+1)</option>\n          {/* United States intentionally removed as per requirement */}\n        </select>\n      </label>\n\n      <label className=\"block\">\n        <span className=\"block text-sm text-slate-700\">Phone</span>\n        <input\n          {...register(\"phone\")}\n          value={display}\n          onChange={(e) => {\n            // Keep only digits\n            const digits = e.target.value.replace(/\\D/g, \"\");\n            // Max length: 10 digits for Canadian numbers\n            const truncated = digits.slice(0, 10);\n            setDisplay(truncated);\n            setValue(\"phone\", truncated, { shouldValidate: true });\n          }}\n          inputMode=\"numeric\"\n          pattern=\"\\d{10}\"\n          className=\"mt-1 w-full rounded border border-slate-300 p-2\"\n          placeholder=\"2045551234\"\n        />\n        {errors.phone?.message && (\n          <p className=\"text-xs text-rose-600\">\n            {errors.phone.message as string}\n          </p>\n        )}\n      </label>\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;;AAEA;;;AAFA;;AAWe,SAAS,WAAW,KAUlC;QAVkC,EACjC,QAAQ,EACR,QAAQ,EACR,KAAK,EACL,MAAM,EAMP,GAVkC;QA8C1B;;IAnCP,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,wSAAQ,EAAC;IACvC,MAAM,eAAe,MAAM;IAE3B,qBACE,4TAAC;QAAI,WAAU;;0BACb,4TAAC;gBAAM,WAAU;;kCACf,4TAAC;wBAAK,WAAU;kCAA+B;;;;;;kCAC/C,4TAAC;wBACE,GAAG,SAAS,eAAe;wBAC5B,cAAa;wBACb,WAAU;kCAEV,cAAA,4TAAC;4BAAO,OAAM;sCAAK;;;;;;;;;;;;;;;;;0BAKvB,4TAAC;gBAAM,WAAU;;kCACf,4TAAC;wBAAK,WAAU;kCAA+B;;;;;;kCAC/C,4TAAC;wBACE,GAAG,SAAS,QAAQ;wBACrB,OAAO;wBACP,UAAU,CAAC;4BACT,mBAAmB;4BACnB,MAAM,SAAS,EAAE,MAAM,CAAC,KAAK,CAAC,OAAO,CAAC,OAAO;4BAC7C,6CAA6C;4BAC7C,MAAM,YAAY,OAAO,KAAK,CAAC,GAAG;4BAClC,WAAW;4BACX,SAAS,SAAS,WAAW;gCAAE,gBAAgB;4BAAK;wBACtD;wBACA,WAAU;wBACV,SAAQ;wBACR,WAAU;wBACV,aAAY;;;;;;oBAEb,EAAA,gBAAA,OAAO,KAAK,cAAZ,oCAAA,cAAc,OAAO,mBACpB,4TAAC;wBAAE,WAAU;kCACV,OAAO,KAAK,CAAC,OAAO;;;;;;;;;;;;;;;;;;AAMjC;GAtDwB;KAAA","debugId":null}},
    {"offset": {"line": 1529, "column": 0}, "map": {"version":3,"sources":["file:///Users/dvskrishna/Business/innovyom/Unify_Trucking_DB/unify_trucking_db/components/inputs/PostalInput.tsx"],"sourcesContent":["\"use client\";\n\nimport { detectCA, isUSZip } from \"@/lib/postal\";\nimport type {\n  UseFormRegister,\n  UseFormSetValue,\n  FieldErrors,\n} from \"react-hook-form\";\nimport type { RegisterValues } from \"@/lib/register-schemas\";\n\nexport default function PostalInput({\n  register,\n  setValue,\n  errors,\n}: {\n  register: UseFormRegister<RegisterValues>;\n  setValue: UseFormSetValue<RegisterValues>;\n  errors: FieldErrors<RegisterValues>;\n}) {\n  function formatCA(v: string): string {\n    const s = v.replace(/\\s+/g, \"\").slice(0, 6); // only first 6 chars\n    return s.length > 3 ? `${s.slice(0, 3)} ${s.slice(3)}` : s;\n  }\n\n  return (\n    <label className=\"block\">\n      <span className=\"block text-sm text-slate-700\">Postal/ZIP</span>\n      <input\n        {...register(\"postal\")}\n        className=\"mt-1 w-full rounded border border-slate-300 p-2\"\n        placeholder=\"A1A 1A1 or 90210\"\n        maxLength={7} // A1A 1A1 pattern\n        onInput={(e) => {\n          const t = e.target as HTMLInputElement;\n          let v = t.value.toUpperCase().replace(/[^A-Z0-9\\s-]/g, \"\");\n\n          // Canadian pattern: first letter must be valid\n          if (/^[ABCEGHJ-NPRSTVXY]\\d[A-Z]?/i.test(v.replace(/\\s/g, \"\"))) {\n            t.value = formatCA(v);\n          } else {\n            // For non-CA, keep only digits (ZIP code)\n            if (/^\\d/.test(v)) {\n              t.value = v.replace(/\\D/g, \"\").slice(0, 10); // allow ZIP+4\n            }\n          }\n        }}\n        onBlur={(e) => {\n          const raw = (e.target as HTMLInputElement).value.trim();\n          const ca = detectCA(raw);\n          if (ca.ok) {\n            if (ca.normalized) setValue(\"postal\", ca.normalized);\n            setValue(\"country\", \"CA\");\n            if (ca.province) setValue(\"region\", ca.province);\n            return;\n          }\n          if (isUSZip(raw)) {\n            setValue(\"country\", \"US\");\n          }\n        }}\n      />\n      {errors.postal?.message && (\n        <p className=\"text-xs text-rose-600\">\n          {errors.postal.message as string}\n        </p>\n      )}\n    </label>\n  );\n}\n"],"names":[],"mappings":";;;;;AAEA;AAFA;;;AAUe,SAAS,YAAY,KAQnC;QARmC,EAClC,QAAQ,EACR,QAAQ,EACR,MAAM,EAKP,GARmC;QAkD7B;IAzCL,SAAS,SAAS,CAAS;QACzB,MAAM,IAAI,EAAE,OAAO,CAAC,QAAQ,IAAI,KAAK,CAAC,GAAG,IAAI,qBAAqB;QAClE,OAAO,EAAE,MAAM,GAAG,IAAI,AAAC,GAAmB,OAAjB,EAAE,KAAK,CAAC,GAAG,IAAG,KAAc,OAAX,EAAE,KAAK,CAAC,MAAO;IAC3D;IAEA,qBACE,4TAAC;QAAM,WAAU;;0BACf,4TAAC;gBAAK,WAAU;0BAA+B;;;;;;0BAC/C,4TAAC;gBACE,GAAG,SAAS,SAAS;gBACtB,WAAU;gBACV,aAAY;gBACZ,WAAW;gBACX,SAAS,CAAC;oBACR,MAAM,IAAI,EAAE,MAAM;oBAClB,IAAI,IAAI,EAAE,KAAK,CAAC,WAAW,GAAG,OAAO,CAAC,iBAAiB;oBAEvD,+CAA+C;oBAC/C,IAAI,+BAA+B,IAAI,CAAC,EAAE,OAAO,CAAC,OAAO,MAAM;wBAC7D,EAAE,KAAK,GAAG,SAAS;oBACrB,OAAO;wBACL,0CAA0C;wBAC1C,IAAI,MAAM,IAAI,CAAC,IAAI;4BACjB,EAAE,KAAK,GAAG,EAAE,OAAO,CAAC,OAAO,IAAI,KAAK,CAAC,GAAG,KAAK,cAAc;wBAC7D;oBACF;gBACF;gBACA,QAAQ,CAAC;oBACP,MAAM,MAAM,AAAC,EAAE,MAAM,CAAsB,KAAK,CAAC,IAAI;oBACrD,MAAM,KAAK,IAAA,4HAAQ,EAAC;oBACpB,IAAI,GAAG,EAAE,EAAE;wBACT,IAAI,GAAG,UAAU,EAAE,SAAS,UAAU,GAAG,UAAU;wBACnD,SAAS,WAAW;wBACpB,IAAI,GAAG,QAAQ,EAAE,SAAS,UAAU,GAAG,QAAQ;wBAC/C;oBACF;oBACA,IAAI,IAAA,2HAAO,EAAC,MAAM;wBAChB,SAAS,WAAW;oBACtB;gBACF;;;;;;YAED,EAAA,iBAAA,OAAO,MAAM,cAAb,qCAAA,eAAe,OAAO,mBACrB,4TAAC;gBAAE,WAAU;0BACV,OAAO,MAAM,CAAC,OAAO;;;;;;;;;;;;AAKhC;KAzDwB","debugId":null}},
    {"offset": {"line": 1617, "column": 0}, "map": {"version":3,"sources":["file:///Users/dvskrishna/Business/innovyom/Unify_Trucking_DB/unify_trucking_db/components/inputs/LicenceInput.tsx"],"sourcesContent":["\"use client\";\n\nimport { formatLicence } from \"@/lib/license-rules\";\nimport type {\n  UseFormRegister,\n  UseFormSetValue,\n  UseFormWatch,\n  FieldErrors,\n} from \"react-hook-form\";\nimport type { RegisterValues } from \"@/lib/register-schemas\";\n\nexport default function LicenceInput({\n  register,\n  setValue,\n  watch,\n  errors,\n}: {\n  register: UseFormRegister<RegisterValues>;\n  setValue: UseFormSetValue<RegisterValues>;\n  watch: UseFormWatch<RegisterValues>;\n  errors: FieldErrors<RegisterValues>;\n}) {\n  const jurisdiction = watch(\"jurisdiction\") as string;\n\n  function handleInput(e: React.ChangeEvent<HTMLInputElement>) {\n    const t = e.target as HTMLInputElement;\n    // Clean: uppercase, strip invalids\n    let v = t.value.toUpperCase().replace(/[^A-Z0-9-]/g, \"\");\n    // Apply jurisdiction-specific formatting\n    v = formatLicence(jurisdiction, v);\n    t.value = v;\n    setValue(\"licenseNo\", v, { shouldValidate: true });\n  }\n\n  return (\n    <label className=\"block\">\n      <span className=\"block text-sm text-slate-700\">Licence number</span>\n      <input\n        {...register(\"licenseNo\")}\n        className=\"mt-1 w-full rounded border border-slate-300 p-2 font-mono tracking-wider\"\n        placeholder={maskHint(jurisdiction)}\n        onInput={handleInput}\n        maxLength={20}\n        autoComplete=\"off\"\n      />\n      {errors.licenseNo?.message && (\n        <p className=\"text-xs text-rose-600\">\n          {errors.licenseNo.message as string}\n        </p>\n      )}\n      <p className=\"mt-1 text-xs text-slate-500\">\n        Enter only letters/numbers (formatting applied automatically).\n      </p>\n    </label>\n  );\n}\n\nfunction maskHint(j: string): string {\n  switch (j) {\n    case \"CA-ON\":\n      return \"A####-#####-#####\";\n    case \"CA-BC\":\n      return \"####### or ########\";\n    case \"CA-AB\":\n      return \"######-### or 5–9 digits\";\n    case \"CA-SK\":\n      return \"########\";\n    case \"CA-QC\":\n      return \"A############\";\n    case \"CA-NL\":\n      return \"A#########\";\n    case \"CA-MB\":\n      return \"####### (7 digits)\";\n    case \"CA-NB\":\n    case \"CA-NS\":\n    case \"CA-PE\":\n      return \"Up to 8 digits\";\n    default:\n      return \"Up to 15 letters/digits\";\n  }\n}\n"],"names":[],"mappings":";;;;;AAEA;AAFA;;;AAWe,SAAS,aAAa,KAUpC;QAVoC,EACnC,QAAQ,EACR,QAAQ,EACR,KAAK,EACL,MAAM,EAMP,GAVoC;QAkC9B;IAvBL,MAAM,eAAe,MAAM;IAE3B,SAAS,YAAY,CAAsC;QACzD,MAAM,IAAI,EAAE,MAAM;QAClB,mCAAmC;QACnC,IAAI,IAAI,EAAE,KAAK,CAAC,WAAW,GAAG,OAAO,CAAC,eAAe;QACrD,yCAAyC;QACzC,IAAI,IAAA,2IAAa,EAAC,cAAc;QAChC,EAAE,KAAK,GAAG;QACV,SAAS,aAAa,GAAG;YAAE,gBAAgB;QAAK;IAClD;IAEA,qBACE,4TAAC;QAAM,WAAU;;0BACf,4TAAC;gBAAK,WAAU;0BAA+B;;;;;;0BAC/C,4TAAC;gBACE,GAAG,SAAS,YAAY;gBACzB,WAAU;gBACV,aAAa,SAAS;gBACtB,SAAS;gBACT,WAAW;gBACX,cAAa;;;;;;YAEd,EAAA,oBAAA,OAAO,SAAS,cAAhB,wCAAA,kBAAkB,OAAO,mBACxB,4TAAC;gBAAE,WAAU;0BACV,OAAO,SAAS,CAAC,OAAO;;;;;;0BAG7B,4TAAC;gBAAE,WAAU;0BAA8B;;;;;;;;;;;;AAKjD;KA5CwB;AA8CxB,SAAS,SAAS,CAAS;IACzB,OAAQ;QACN,KAAK;YACH,OAAO;QACT,KAAK;YACH,OAAO;QACT,KAAK;YACH,OAAO;QACT,KAAK;YACH,OAAO;QACT,KAAK;YACH,OAAO;QACT,KAAK;YACH,OAAO;QACT,KAAK;YACH,OAAO;QACT,KAAK;QACL,KAAK;QACL,KAAK;YACH,OAAO;QACT;YACE,OAAO;IACX;AACF","debugId":null}},
    {"offset": {"line": 1721, "column": 0}, "map": {"version":3,"sources":["file:///Users/dvskrishna/Business/innovyom/Unify_Trucking_DB/unify_trucking_db/components/inputs/StatusWizard.tsx"],"sourcesContent":["\"use client\";\n\nimport type {\n  FieldErrors,\n  UseFormRegister,\n  UseFormSetValue,\n  UseFormWatch,\n} from \"react-hook-form\";\nimport type { RegisterValues } from \"@/lib/register-schemas\";\n\nexport default function StatusWizard({\n  register,\n  watch,\n  setValue,\n  errors,\n}: {\n  register: UseFormRegister<RegisterValues>;\n  watch: UseFormWatch<RegisterValues>;\n  setValue: UseFormSetValue<RegisterValues>;\n  errors: FieldErrors<RegisterValues>;\n}) {\n  const citizenship = (watch(\"citizenship\") ?? \"CA\") as RegisterValues[\"citizenship\"];\n  const residency = (watch(\"residencyCA\") ?? \"Citizen\") as RegisterValues[\"residencyCA\"];\n  const showPermitType = residency === \"Work Permit\"; // hidden for Study Permit\n\n  // Reset dependent fields on category changes to avoid stale values\n  function onCitizenshipChange(e: React.ChangeEvent<HTMLSelectElement>) {\n    const val = e.target.value as RegisterValues[\"citizenship\"];\n    setValue(\"citizenship\", val, { shouldValidate: true });\n    if (val === \"CA\") {\n      setValue(\"passportCountry\", undefined, { shouldValidate: true });\n      setValue(\"passportNumber\", undefined, { shouldValidate: true });\n      setValue(\"docPassport\", undefined, { shouldValidate: true });\n    }\n  }\n\n  function onResidencyChange(e: React.ChangeEvent<HTMLSelectElement>) {\n    const val = e.target.value as RegisterValues[\"residencyCA\"];\n    setValue(\"residencyCA\", val, { shouldValidate: true });\n\n    // Clear PR/Permit-specific fields when switching\n    if (val !== \"PR\") setValue(\"prNumber\", undefined, { shouldValidate: true });\n    if (val !== \"Work Permit\" && val !== \"Study Permit\") {\n      setValue(\"permitType\", undefined, { shouldValidate: true });\n      setValue(\"docPermit\", undefined, { shouldValidate: true });\n    }\n  }\n\n  return (\n    <section className=\"space-y-4\">\n      <h2 className=\"text-lg font-medium\">Status in Canada</h2>\n      <div className=\"grid gap-4 sm:grid-cols-3\">\n        {/* Citizenship */}\n        <label className=\"block\">\n          <span className=\"block text-sm text-slate-700\">Citizenship</span>\n          <select\n            {...register(\"citizenship\")}\n            defaultValue={citizenship}\n            onChange={onCitizenshipChange}\n            className=\"mt-1 w-full rounded border border-slate-300 p-2\"\n          >\n            <option value=\"CA\">Canada</option>\n            {/* United States intentionally removed */}\n            <option value=\"Other\">Other</option>\n          </select>\n          {errors.citizenship?.message && (\n            <p className=\"text-xs text-rose-600\">{String(errors.citizenship.message)}</p>\n          )}\n        </label>\n\n        {/* Residency in Canada */}\n        <label className=\"block\">\n          <span className=\"block text-sm text-slate-700\">Residency</span>\n          <select\n            {...register(\"residencyCA\")}\n            defaultValue={residency}\n            onChange={onResidencyChange}\n            className=\"mt-1 w-full rounded border border-slate-300 p-2\"\n          >\n            <option value=\"Citizen\">Citizen</option>\n            <option value=\"PR\">Permanent Resident</option>\n            <option value=\"Work Permit\">Work Permit</option>\n            <option value=\"Study Permit\">Study Permit</option>\n            {/* Visitor removed */}\n          </select>\n          {errors.residencyCA?.message && (\n            <p className=\"text-xs text-rose-600\">{String(errors.residencyCA.message)}</p>\n          )}\n        </label>\n\n        {/* Permit type — only for Work Permit */}\n        {showPermitType ? (\n          <label className=\"block\">\n            <span className=\"block text-sm text-slate-700\">Permit type</span>\n            <select\n              {...register(\"permitType\")}\n              className=\"mt-1 w-full rounded border border-slate-300 p-2\"\n              defaultValue=\"\"\n            >\n              <option value=\"\" disabled>\n                Select type\n              </option>\n              <option value=\"Closed (employer-specific)\">Closed (employer-specific)</option>\n              <option value=\"Open work permit\">Open work permit</option>\n              <option value=\"PGWP\">Post-Graduation Work Permit (PGWP)</option>\n              <option value=\"IEC\">IEC (Working Holiday, YP, Co-op)</option>\n              <option value=\"Other\">Other</option>\n            </select>\n            {errors.permitType?.message && (\n              <p className=\"text-xs text-rose-600\">{String(errors.permitType.message)}</p>\n            )}\n          </label>\n        ) : (\n          <div />\n        )}\n      </div>\n    </section>\n  );\n}\n"],"names":[],"mappings":";;;;;AAAA;;AAUe,SAAS,aAAa,KAUpC;QAVoC,EACnC,QAAQ,EACR,KAAK,EACL,QAAQ,EACR,MAAM,EAMP,GAVoC;QAuD1B,qBAoBA,qBAuBE;QAvFU;IAArB,MAAM,cAAe,CAAA,SAAA,MAAM,4BAAN,oBAAA,SAAwB;QAC1B;IAAnB,MAAM,YAAa,CAAA,UAAA,MAAM,4BAAN,qBAAA,UAAwB;IAC3C,MAAM,iBAAiB,cAAc,eAAe,0BAA0B;IAE9E,mEAAmE;IACnE,SAAS,oBAAoB,CAAuC;QAClE,MAAM,MAAM,EAAE,MAAM,CAAC,KAAK;QAC1B,SAAS,eAAe,KAAK;YAAE,gBAAgB;QAAK;QACpD,IAAI,QAAQ,MAAM;YAChB,SAAS,mBAAmB,WAAW;gBAAE,gBAAgB;YAAK;YAC9D,SAAS,kBAAkB,WAAW;gBAAE,gBAAgB;YAAK;YAC7D,SAAS,eAAe,WAAW;gBAAE,gBAAgB;YAAK;QAC5D;IACF;IAEA,SAAS,kBAAkB,CAAuC;QAChE,MAAM,MAAM,EAAE,MAAM,CAAC,KAAK;QAC1B,SAAS,eAAe,KAAK;YAAE,gBAAgB;QAAK;QAEpD,iDAAiD;QACjD,IAAI,QAAQ,MAAM,SAAS,YAAY,WAAW;YAAE,gBAAgB;QAAK;QACzE,IAAI,QAAQ,iBAAiB,QAAQ,gBAAgB;YACnD,SAAS,cAAc,WAAW;gBAAE,gBAAgB;YAAK;YACzD,SAAS,aAAa,WAAW;gBAAE,gBAAgB;YAAK;QAC1D;IACF;IAEA,qBACE,4TAAC;QAAQ,WAAU;;0BACjB,4TAAC;gBAAG,WAAU;0BAAsB;;;;;;0BACpC,4TAAC;gBAAI,WAAU;;kCAEb,4TAAC;wBAAM,WAAU;;0CACf,4TAAC;gCAAK,WAAU;0CAA+B;;;;;;0CAC/C,4TAAC;gCACE,GAAG,SAAS,cAAc;gCAC3B,cAAc;gCACd,UAAU;gCACV,WAAU;;kDAEV,4TAAC;wCAAO,OAAM;kDAAK;;;;;;kDAEnB,4TAAC;wCAAO,OAAM;kDAAQ;;;;;;;;;;;;4BAEvB,EAAA,sBAAA,OAAO,WAAW,cAAlB,0CAAA,oBAAoB,OAAO,mBAC1B,4TAAC;gCAAE,WAAU;0CAAyB,OAAO,OAAO,WAAW,CAAC,OAAO;;;;;;;;;;;;kCAK3E,4TAAC;wBAAM,WAAU;;0CACf,4TAAC;gCAAK,WAAU;0CAA+B;;;;;;0CAC/C,4TAAC;gCACE,GAAG,SAAS,cAAc;gCAC3B,cAAc;gCACd,UAAU;gCACV,WAAU;;kDAEV,4TAAC;wCAAO,OAAM;kDAAU;;;;;;kDACxB,4TAAC;wCAAO,OAAM;kDAAK;;;;;;kDACnB,4TAAC;wCAAO,OAAM;kDAAc;;;;;;kDAC5B,4TAAC;wCAAO,OAAM;kDAAe;;;;;;;;;;;;4BAG9B,EAAA,sBAAA,OAAO,WAAW,cAAlB,0CAAA,oBAAoB,OAAO,mBAC1B,4TAAC;gCAAE,WAAU;0CAAyB,OAAO,OAAO,WAAW,CAAC,OAAO;;;;;;;;;;;;oBAK1E,+BACC,4TAAC;wBAAM,WAAU;;0CACf,4TAAC;gCAAK,WAAU;0CAA+B;;;;;;0CAC/C,4TAAC;gCACE,GAAG,SAAS,aAAa;gCAC1B,WAAU;gCACV,cAAa;;kDAEb,4TAAC;wCAAO,OAAM;wCAAG,QAAQ;kDAAC;;;;;;kDAG1B,4TAAC;wCAAO,OAAM;kDAA6B;;;;;;kDAC3C,4TAAC;wCAAO,OAAM;kDAAmB;;;;;;kDACjC,4TAAC;wCAAO,OAAM;kDAAO;;;;;;kDACrB,4TAAC;wCAAO,OAAM;kDAAM;;;;;;kDACpB,4TAAC;wCAAO,OAAM;kDAAQ;;;;;;;;;;;;4BAEvB,EAAA,qBAAA,OAAO,UAAU,cAAjB,yCAAA,mBAAmB,OAAO,mBACzB,4TAAC;gCAAE,WAAU;0CAAyB,OAAO,OAAO,UAAU,CAAC,OAAO;;;;;;;;;;;6CAI1E,4TAAC;;;;;;;;;;;;;;;;;AAKX;KA5GwB","debugId":null}},
    {"offset": {"line": 2020, "column": 0}, "map": {"version":3,"sources":["file:///Users/dvskrishna/Business/innovyom/Unify_Trucking_DB/unify_trucking_db/components/inputs/LicenseClassSelect.tsx"],"sourcesContent":["\"use client\";\n\nimport { useEffect } from \"react\";\nimport { classesFor } from \"@/lib/license-classes\";\nimport type {\n  UseFormRegister,\n  UseFormSetValue,\n  UseFormWatch,\n  FieldErrors,\n} from \"react-hook-form\";\nimport type { RegisterValues } from \"@/lib/register-schemas\";\n\nconst AIR_BRAKE_LABEL: Record<string, string> = {\n  \"CA-ON\": \"Air brake (Z)\",\n  \"CA-MB\": \"Air brake (A)\",\n  \"CA-AB\": \"Air brake (Q/endorsement)\",\n  \"CA-SK\": \"Air brake\",\n  \"CA-BC\": \"Air brake\",\n  \"CA-QC\": \"Air brake (F endorsement)\",\n  \"CA-NB\": \"Air brake\",\n  \"CA-NL\": \"Air brake\",\n  \"CA-NS\": \"Air brake\",\n  \"CA-PE\": \"Air brake\",\n  // Territories (generic label)\n  \"CA-YT\": \"Air brake\",\n  \"CA-NT\": \"Air brake\",\n  \"CA-NU\": \"Air brake\",\n};\n\nexport default function LicenseClassSelect({\n  register,\n  setValue,\n  watch,\n  errors,\n}: {\n  register: UseFormRegister<RegisterValues>;\n  setValue: UseFormSetValue<RegisterValues>;\n  watch: UseFormWatch<RegisterValues>;\n  errors: FieldErrors<RegisterValues>;\n}) {\n  const jurisdiction = watch(\"jurisdiction\") as string | undefined;\n  const currentClass = watch(\"licenseClass\") as string | undefined;\n  const allowed = jurisdiction ? classesFor(jurisdiction) : [];\n  const label = AIR_BRAKE_LABEL[jurisdiction ?? \"\"] ?? \"Air brake\";\n\n  // Reset class when jurisdiction changes to avoid stale / invalid selections\n  useEffect(() => {\n    setValue(\"licenseClass\", \"\", { shouldValidate: true });\n  }, [jurisdiction, setValue]);\n\n  return (\n    <div className=\"grid gap-4 sm:grid-cols-2\">\n      <label className=\"block\">\n        <span className=\"block text-sm text-slate-700\">Licence class</span>\n        <select\n          {...register(\"licenseClass\")}\n          disabled={!jurisdiction}\n          value={currentClass ?? \"\"}\n          onChange={(e) => setValue(\"licenseClass\", e.target.value, { shouldValidate: true })}\n          className=\"mt-1 w-full rounded border border-slate-300 p-2\"\n        >\n          <option value=\"\" disabled>\n            {jurisdiction ? \"Select class\" : \"Select jurisdiction first\"}\n          </option>\n          {jurisdiction && allowed.length === 0 && (\n            <option value=\"\" disabled>\n              No classes found\n            </option>\n          )}\n          {allowed.map((c) => (\n            <option key={c} value={c}>\n              {c}\n            </option>\n          ))}\n        </select>\n        {errors?.licenseClass?.message && (\n          <p className=\"text-xs text-rose-600\">\n            {String(errors.licenseClass.message)}\n          </p>\n        )}\n      </label>\n\n      <label className=\"mt-6 inline-flex items-center gap-2\">\n        <input type=\"checkbox\" {...register(\"airBrake\")} className=\"h-4 w-4\" />\n        <span className=\"text-sm text-slate-700\">{label}</span>\n      </label>\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;;;AAHA;;;AAYA,MAAM,kBAA0C;IAC9C,SAAS;IACT,SAAS;IACT,SAAS;IACT,SAAS;IACT,SAAS;IACT,SAAS;IACT,SAAS;IACT,SAAS;IACT,SAAS;IACT,SAAS;IACT,8BAA8B;IAC9B,SAAS;IACT,SAAS;IACT,SAAS;AACX;AAEe,SAAS,mBAAmB,KAU1C;QAV0C,EACzC,QAAQ,EACR,QAAQ,EACR,KAAK,EACL,MAAM,EAMP,GAV0C;QA8ClC;;IAnCP,MAAM,eAAe,MAAM;IAC3B,MAAM,eAAe,MAAM;IAC3B,MAAM,UAAU,eAAe,IAAA,0IAAU,EAAC,gBAAgB,EAAE;QAC9C;IAAd,MAAM,QAAQ,CAAA,oBAAA,eAAe,CAAC,yBAAA,0BAAA,eAAgB,GAAG,cAAnC,+BAAA,oBAAuC;IAErD,4EAA4E;IAC5E,IAAA,ySAAS;wCAAC;YACR,SAAS,gBAAgB,IAAI;gBAAE,gBAAgB;YAAK;QACtD;uCAAG;QAAC;QAAc;KAAS;IAE3B,qBACE,4TAAC;QAAI,WAAU;;0BACb,4TAAC;gBAAM,WAAU;;kCACf,4TAAC;wBAAK,WAAU;kCAA+B;;;;;;kCAC/C,4TAAC;wBACE,GAAG,SAAS,eAAe;wBAC5B,UAAU,CAAC;wBACX,OAAO,yBAAA,0BAAA,eAAgB;wBACvB,UAAU,CAAC,IAAM,SAAS,gBAAgB,EAAE,MAAM,CAAC,KAAK,EAAE;gCAAE,gBAAgB;4BAAK;wBACjF,WAAU;;0CAEV,4TAAC;gCAAO,OAAM;gCAAG,QAAQ;0CACtB,eAAe,iBAAiB;;;;;;4BAElC,gBAAgB,QAAQ,MAAM,KAAK,mBAClC,4TAAC;gCAAO,OAAM;gCAAG,QAAQ;0CAAC;;;;;;4BAI3B,QAAQ,GAAG,CAAC,CAAC,kBACZ,4TAAC;oCAAe,OAAO;8CACpB;mCADU;;;;;;;;;;;oBAKhB,CAAA,mBAAA,8BAAA,uBAAA,OAAQ,YAAY,cAApB,2CAAA,qBAAsB,OAAO,mBAC5B,4TAAC;wBAAE,WAAU;kCACV,OAAO,OAAO,YAAY,CAAC,OAAO;;;;;;;;;;;;0BAKzC,4TAAC;gBAAM,WAAU;;kCACf,4TAAC;wBAAM,MAAK;wBAAY,GAAG,SAAS,WAAW;wBAAE,WAAU;;;;;;kCAC3D,4TAAC;wBAAK,WAAU;kCAA0B;;;;;;;;;;;;;;;;;;AAIlD;GA3DwB;KAAA","debugId":null}},
    {"offset": {"line": 2181, "column": 0}, "map": {"version":3,"sources":["file:///Users/dvskrishna/Business/innovyom/Unify_Trucking_DB/unify_trucking_db/components/inputs/CountrySelect.tsx"],"sourcesContent":["\"use client\";\n\nimport { useMemo, useState } from \"react\";\nimport { allCountries } from \"@/lib/countries\";\nimport type {\n  UseFormRegister,\n  UseFormSetValue,\n  FieldErrors,\n  Path,\n} from \"react-hook-form\";\nimport type { RegisterValues } from \"@/lib/register-schemas\";\n\ntype Props = {\n  name: Path<RegisterValues>;\n  label?: string;\n  register: UseFormRegister<RegisterValues>;\n  setValue: UseFormSetValue<RegisterValues>;\n  errors?: FieldErrors<RegisterValues>;\n  defaultCode?: string;\n};\n\nconst COUNTRIES = allCountries().slice().sort((a, b) => a.name.localeCompare(b.name));\n\nexport default function CountrySelect({\n  name,\n  label = \"Country\",\n  register,\n  setValue,\n  errors,\n  defaultCode,\n}: Props) {\n  const [q, setQ] = useState(\"\");\n\n  const filtered = useMemo(() => {\n    const s = q.trim().toLowerCase();\n    if (!s) return COUNTRIES;\n    return COUNTRIES.filter(\n      (c) => c.name.toLowerCase().includes(s) || c.code.toLowerCase().includes(s),\n    );\n  }, [q]);\n\n  function errorOf(): string | undefined {\n    // react-hook-form FieldErrors is loose; extract message safely\n    const e = (errors?.[name as keyof typeof errors] ?? {}) as { message?: unknown };\n    return typeof e.message === \"string\" ? e.message : undefined;\n  }\n\n  return (\n    <div className=\"space-y-1\">\n      <label className=\"block\">\n        <span className=\"block text-sm text-slate-700\">{label}</span>\n      </label>\n\n      <div className=\"grid gap-2 sm:grid-cols-[1fr_18rem]\">\n        <input\n          value={q}\n          onChange={(e) => setQ(e.target.value)}\n          className=\"rounded border border-slate-300 p-2\"\n          placeholder=\"Search country…\"\n          aria-label=\"Search country\"\n        />\n        <select\n          {...register(name)}\n          defaultValue={defaultCode ?? \"\"}\n          onChange={(e) =>\n            setValue(name, e.target.value as any, {\n              shouldValidate: true,\n              shouldDirty: true,\n            })\n          }\n          className=\"rounded border border-slate-300 p-2\"\n          aria-invalid={Boolean(errorOf()) || undefined}\n        >\n          <option value=\"\" disabled>\n            Select country\n          </option>\n          {filtered.map((c) => (\n            <option key={c.code} value={c.code}>\n              {c.name}\n            </option>\n          ))}\n        </select>\n      </div>\n\n      {errorOf() && <p className=\"text-xs text-rose-600\">{errorOf()}</p>}\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;;;AAHA;;;AAqBA,MAAM,YAAY,IAAA,mIAAY,IAAG,KAAK,GAAG,IAAI,MAAC,CAAC,GAAG,IAAM,EAAE,IAAI,CAAC,aAAa,CAAC,EAAE,IAAI;;AAEpE,SAAS,cAAc,KAO9B;QAP8B,EACpC,IAAI,EACJ,QAAQ,SAAS,EACjB,QAAQ,EACR,QAAQ,EACR,MAAM,EACN,WAAW,EACL,GAP8B;;IAQpC,MAAM,CAAC,GAAG,KAAK,GAAG,IAAA,wSAAQ,EAAC;IAE3B,MAAM,WAAW,IAAA,uSAAO;2CAAC;YACvB,MAAM,IAAI,EAAE,IAAI,GAAG,WAAW;YAC9B,IAAI,CAAC,GAAG,OAAO;YACf,OAAO,UAAU,MAAM;mDACrB,CAAC,IAAM,EAAE,IAAI,CAAC,WAAW,GAAG,QAAQ,CAAC,MAAM,EAAE,IAAI,CAAC,WAAW,GAAG,QAAQ,CAAC;;QAE7E;0CAAG;QAAC;KAAE;IAEN,SAAS;YAEI;QADX,+DAA+D;QAC/D,MAAM,IAAK,CAAA,eAAA,mBAAA,6BAAA,MAAQ,CAAC,KAA4B,cAArC,0BAAA,eAAyC,CAAC;QACrD,OAAO,OAAO,EAAE,OAAO,KAAK,WAAW,EAAE,OAAO,GAAG;IACrD;IAEA,qBACE,4TAAC;QAAI,WAAU;;0BACb,4TAAC;gBAAM,WAAU;0BACf,cAAA,4TAAC;oBAAK,WAAU;8BAAgC;;;;;;;;;;;0BAGlD,4TAAC;gBAAI,WAAU;;kCACb,4TAAC;wBACC,OAAO;wBACP,UAAU,CAAC,IAAM,KAAK,EAAE,MAAM,CAAC,KAAK;wBACpC,WAAU;wBACV,aAAY;wBACZ,cAAW;;;;;;kCAEb,4TAAC;wBACE,GAAG,SAAS,KAAK;wBAClB,cAAc,wBAAA,yBAAA,cAAe;wBAC7B,UAAU,CAAC,IACT,SAAS,MAAM,EAAE,MAAM,CAAC,KAAK,EAAS;gCACpC,gBAAgB;gCAChB,aAAa;4BACf;wBAEF,WAAU;wBACV,gBAAc,QAAQ,cAAc;;0CAEpC,4TAAC;gCAAO,OAAM;gCAAG,QAAQ;0CAAC;;;;;;4BAGzB,SAAS,GAAG,CAAC,CAAC,kBACb,4TAAC;oCAAoB,OAAO,EAAE,IAAI;8CAC/B,EAAE,IAAI;mCADI,EAAE,IAAI;;;;;;;;;;;;;;;;;YAOxB,2BAAa,4TAAC;gBAAE,WAAU;0BAAyB;;;;;;;;;;;;AAG1D;GAhEwB;MAAA","debugId":null}},
    {"offset": {"line": 2315, "column": 0}, "map": {"version":3,"sources":["file:///Users/dvskrishna/Business/innovyom/Unify_Trucking_DB/unify_trucking_db/components/inputs/PassportInput.tsx"],"sourcesContent":["\"use client\";\n\nimport { useEffect, useMemo, useRef, useState } from \"react\";\nimport { passportPatternFor, normalizePassport } from \"@/lib/passport/validate\";\nimport type { UseFormRegister, UseFormSetValue, FieldErrors } from \"react-hook-form\";\nimport type { RegisterValues } from \"@/lib/register-schemas\";\n\nexport default function PassportInput({\n  countryCode,\n  register,\n  setValue,\n  errors,\n}: {\n  countryCode?: string;\n  register: UseFormRegister<RegisterValues>;\n  setValue: UseFormSetValue<RegisterValues>;\n  errors?: FieldErrors<RegisterValues>;\n}) {\n  const [v, setV] = useState(\"\");\n  const pat = useMemo(() => passportPatternFor(countryCode), [countryCode]);\n  const inputRef = useRef<HTMLInputElement>(null);\n\n  // When country changes, clip to max length and re-validate\n  useEffect(() => {\n    if (!inputRef.current) return;\n    if (pat.maxLen && v.length > pat.maxLen) {\n      const clipped = v.slice(0, pat.maxLen);\n      setV(clipped);\n      setValue(\"passportNumber\", clipped, { shouldValidate: true });\n    } else {\n      // trigger validation when country changes even if length is ok\n      setValue(\"passportNumber\", v, { shouldValidate: true });\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [countryCode]);\n\n  return (\n    <div className=\"space-y-1\">\n      <label className=\"block\">\n        <span className=\"block text-sm text-slate-700\">Passport number</span>\n      </label>\n      <input\n        {...(() => {\n          const r = register(\"passportNumber\");\n          return r;\n        })()}\n        ref={(el) => {\n          const r = register(\"passportNumber\");\n          if (typeof r.ref === \"function\") r.ref(el);\n          else if (r.ref) (r.ref as React.MutableRefObject<HTMLInputElement | null>).current = el;\n          (inputRef as React.MutableRefObject<HTMLInputElement | null>).current = el;\n        }}\n        value={v}\n        onChange={(e) => {\n          // Uppercase A–Z, digits only; hard limit by country pattern\n          let s = e.target.value.toUpperCase().replace(/[^A-Z0-9]/g, \"\");\n          if (pat.maxLen) s = s.slice(0, pat.maxLen);\n          setV(s);\n          setValue(\"passportNumber\", s, { shouldValidate: true });\n        }}\n        onBlur={(e) => {\n          const canon = normalizePassport(e.target.value);\n          setV(canon);\n          setValue(\"passportNumber\", canon, { shouldValidate: true });\n        }}\n        inputMode=\"text\"\n        autoCapitalize=\"characters\"\n        className=\"mt-1 w-full rounded border border-slate-300 p-2 font-mono tracking-wider\"\n        placeholder={pat.hint || \"e.g., K1234567\"}\n        aria-describedby=\"passport-hint\"\n      />\n      <p id=\"passport-hint\" className=\"text-xs text-slate-500\">\n        {countryCode ? `Expected format for ${countryCode.toUpperCase()}: ` : \"Expected format: \"}\n        {pat.hint || \"6–10 letters/digits\"}\n      </p>\n      {errors?.passportNumber?.message && (\n        <p className=\"text-xs text-rose-600\">{String(errors.passportNumber.message)}</p>\n      )}\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;;;AAHA;;;AAOe,SAAS,cAAc,KAUrC;QAVqC,EACpC,WAAW,EACX,QAAQ,EACR,QAAQ,EACR,MAAM,EAMP,GAVqC;QAoE/B;;IAzDL,MAAM,CAAC,GAAG,KAAK,GAAG,IAAA,wSAAQ,EAAC;IAC3B,MAAM,MAAM,IAAA,uSAAO;sCAAC,IAAM,IAAA,oJAAkB,EAAC;qCAAc;QAAC;KAAY;IACxE,MAAM,WAAW,IAAA,sSAAM,EAAmB;IAE1C,2DAA2D;IAC3D,IAAA,ySAAS;mCAAC;YACR,IAAI,CAAC,SAAS,OAAO,EAAE;YACvB,IAAI,IAAI,MAAM,IAAI,EAAE,MAAM,GAAG,IAAI,MAAM,EAAE;gBACvC,MAAM,UAAU,EAAE,KAAK,CAAC,GAAG,IAAI,MAAM;gBACrC,KAAK;gBACL,SAAS,kBAAkB,SAAS;oBAAE,gBAAgB;gBAAK;YAC7D,OAAO;gBACL,+DAA+D;gBAC/D,SAAS,kBAAkB,GAAG;oBAAE,gBAAgB;gBAAK;YACvD;QACA,uDAAuD;QACzD;kCAAG;QAAC;KAAY;IAEhB,qBACE,4TAAC;QAAI,WAAU;;0BACb,4TAAC;gBAAM,WAAU;0BACf,cAAA,4TAAC;oBAAK,WAAU;8BAA+B;;;;;;;;;;;0BAEjD,4TAAC;gBACE,GAAG,CAAC;oBACH,MAAM,IAAI,SAAS;oBACnB,OAAO;gBACT,CAAC,GAAG;gBACJ,KAAK,CAAC;oBACJ,MAAM,IAAI,SAAS;oBACnB,IAAI,OAAO,EAAE,GAAG,KAAK,YAAY,EAAE,GAAG,CAAC;yBAClC,IAAI,EAAE,GAAG,EAAE,AAAC,EAAE,GAAG,CAAqD,OAAO,GAAG;oBACpF,SAA6D,OAAO,GAAG;gBAC1E;gBACA,OAAO;gBACP,UAAU,CAAC;oBACT,4DAA4D;oBAC5D,IAAI,IAAI,EAAE,MAAM,CAAC,KAAK,CAAC,WAAW,GAAG,OAAO,CAAC,cAAc;oBAC3D,IAAI,IAAI,MAAM,EAAE,IAAI,EAAE,KAAK,CAAC,GAAG,IAAI,MAAM;oBACzC,KAAK;oBACL,SAAS,kBAAkB,GAAG;wBAAE,gBAAgB;oBAAK;gBACvD;gBACA,QAAQ,CAAC;oBACP,MAAM,QAAQ,IAAA,mJAAiB,EAAC,EAAE,MAAM,CAAC,KAAK;oBAC9C,KAAK;oBACL,SAAS,kBAAkB,OAAO;wBAAE,gBAAgB;oBAAK;gBAC3D;gBACA,WAAU;gBACV,gBAAe;gBACf,WAAU;gBACV,aAAa,IAAI,IAAI,IAAI;gBACzB,oBAAiB;;;;;;0BAEnB,4TAAC;gBAAE,IAAG;gBAAgB,WAAU;;oBAC7B,cAAc,AAAC,uBAAgD,OAA1B,YAAY,WAAW,IAAG,QAAM;oBACrE,IAAI,IAAI,IAAI;;;;;;;YAEd,CAAA,mBAAA,8BAAA,yBAAA,OAAQ,cAAc,cAAtB,6CAAA,uBAAwB,OAAO,mBAC9B,4TAAC;gBAAE,WAAU;0BAAyB,OAAO,OAAO,cAAc,CAAC,OAAO;;;;;;;;;;;;AAIlF;GAzEwB;KAAA","debugId":null}},
    {"offset": {"line": 2453, "column": 0}, "map": {"version":3,"sources":["file:///Users/dvskrishna/Business/innovyom/Unify_Trucking_DB/unify_trucking_db/app/driver/register/page.tsx"],"sourcesContent":["\"use client\";\n\nimport { useState } from \"react\";\nimport { useForm, useFieldArray, type Resolver } from \"react-hook-form\";\nimport { zodResolver } from \"@hookform/resolvers/zod\";\nimport {\n  RegisterSchema,\n  type RegisterValues,\n  normalizeForStorage,\n} from \"@/lib/register-schemas\";\nimport DocUploadField from \"@/components/driver/DocUploadField\";\nimport DriverCardPDF from \"@/components/pdf/DriverCardPDF\";\nimport { buildQrPayload, makeQrPng } from \"@/lib/qr\";\nimport { pdf } from \"@react-pdf/renderer\";\nimport Image from \"next/image\";\nimport {\n  saveSnapshotRemote,\n  type DriverSnapshot,\n} from \"@/lib/demo-store-remote\";\nimport { uuidv4 } from \"@/lib/uuid\";\nimport NameFields from \"@/components/inputs/NameFields\";\nimport PhoneInput from \"@/components/inputs/PhoneInput\";\nimport PostalInput from \"@/components/inputs/PostalInput\";\nimport LicenceInput from \"@/components/inputs/LicenceInput\";\nimport StatusWizard from \"@/components/inputs/StatusWizard\";\nimport LicenseClassSelect from \"@/components/inputs/LicenseClassSelect\";\nimport CountrySelect from \"@/components/inputs/CountrySelect\";\nimport PassportInput from \"@/components/inputs/PassportInput\";\nimport AddressCountrySelect from \"@/components/inputs/PassportInput\";\nimport PassportInput from \"@/components/inputs/PassportInput\";\n\nexport default function RegisterPage() {\n  const {\n    register,\n    handleSubmit,\n    control,\n    formState: { errors },\n    watch,\n    setValue,\n  } = useForm<RegisterValues>({\n    resolver: zodResolver(RegisterSchema) as unknown as Resolver<RegisterValues>,\n    defaultValues: {\n      englishLevel: \"Conversational\",\n      phoneCountry: \"CA\",\n      citizenship: \"CA\",\n      residencyCA: \"Citizen\",\n      consentDate: new Date().toISOString().slice(0, 10),\n      certifyAccurate: false,\n      otherLanguages: [],\n    },\n  });\n\n  const { fields: work, append: addWork, remove: removeWork } = useFieldArray({\n    control,\n    name: \"work\",\n  });\n\n  const [submitting, setSubmitting] = useState(false);\n  const [qrPng, setQrPng] = useState<string | null>(null);\n  const [pdfUrl, setPdfUrl] = useState<string | null>(null);\n  const [qrid, setQrid] = useState<string | null>(null);\n  const [submitError, setSubmitError] = useState<string | null>(null);\n  const [errorSummary, setErrorSummary] = useState<string[] | null>(null);\n  const citizenship = watch(\"citizenship\");\n  const residency = watch(\"residencyCA\");\n  const passportCountry = watch(\"passportCountry\");\n  const needPassport = citizenship !== \"CA\";\n  const needPermit = residency === \"Work Permit\" || residency === \"Study Permit\";\n  const needPR = residency === \"PR\";\n\n  const fullName = [watch(\"givenName\") || \"\", watch(\"middleName\") || \"\", watch(\"surname\") || \"\"]\n    .filter(Boolean)\n    .join(\" \");\n\n  async function onSubmit(values: RegisterValues) {\n    setSubmitting(true);\n    try {\n      setSubmitError(null);\n      setErrorSummary(null);\n      const storeReady = normalizeForStorage(values);\n\n      const id = uuidv4();\n      setQrid(id);\n\n      const payload = buildQrPayload({ qrid: id, origin: window.location.origin });\n      const png = await makeQrPng(payload);\n      setQrPng(png);\n\n      const snap: DriverSnapshot = {\n        qrid: id,\n        name: [storeReady.givenName, storeReady.middleName, storeReady.surname]\n          .filter(Boolean)\n          .join(\" \"),\n        jurisdiction: storeReady.jurisdiction,\n        licenseNo: storeReady.licenseNo,\n        licenseClass: storeReady.licenseClass,\n        licenseExpiry: storeReady.licenseExpiry,\n        issuedAt: new Date().toISOString(),\n      };\n      await saveSnapshotRemote(snap);\n\n      const doc = <DriverCardPDF name={snap.name} qrPng={png} />;\n      const blob = await pdf(doc).toBlob();\n      const url = URL.createObjectURL(blob);\n      setPdfUrl(url);\n    } catch (e) {\n      const msg = e instanceof Error ? e.message : String(e);\n      setSubmitError(msg);\n      if (typeof window !== \"undefined\")\n        window.scrollTo({ top: 0, behavior: \"smooth\" });\n    } finally {\n      setSubmitting(false);\n    }\n  }\n\n  function onInvalid(errs: import(\"react-hook-form\").FieldErrors<RegisterValues>) {\n    const msgs: string[] = [];\n    const pushMsg = (v: unknown) => {\n      if (!v) return;\n      if (typeof v === \"string\") msgs.push(v);\n    };\n    const order: Array<keyof RegisterValues> = [\n      \"givenName\",\"surname\",\"jurisdiction\",\"licenseNo\",\"licenseClass\",\"licenseExpiry\",\"dob\",\"email\",\"phone\",\"postal\",\"citizenship\",\"residencyCA\",\"prNumber\",\"permitType\",\"uci\",\"passportCountry\",\"passportNumber\",\"docLicenseFront\",\"docLicenseBack\",\"docHealthCard\",\"docPR\",\"docPassport\",\"docPermit\",\"consentName\",\"consentDate\",\"consentAbstract\",\"certifyAccurate\",\n    ];\n    for (const k of order) {\n      const issue = (errs as Record<string, any>)[k]?.message as string | undefined;\n      if (issue) pushMsg(issue);\n    }\n    setErrorSummary(msgs.length ? msgs : [\"Please review the highlighted fields.\"]);\n    const firstKey = order.find((k) => Boolean((errs as Record<string, unknown>)[k]));\n    if (firstKey) {\n      const el = document.querySelector(`[name=\"${String(firstKey)}\"]`) as HTMLElement | null;\n      if (el && typeof el.scrollIntoView === \"function\")\n        el.scrollIntoView({ behavior: \"smooth\", block: \"center\" });\n      if (el && typeof el.focus === \"function\") el.focus();\n    }\n  }\n\n  function safeFileName(base: string) {\n    return base.replace(/[^a-z0-9-_]+/gi, \"_\").slice(0, 40) || \"card\";\n  }\n\n  type FileKeys =\n  | \"docLicenseFront\"\n  | \"docLicenseBack\"\n  | \"docHealthCard\"\n  | \"docPassport\"\n  | \"docPR\"\n  | \"docPermit\";\n\n  // helper to set File fields without tripping RHF generics\n  function setFile(key: FileKeys, f: File | null) {\n    setValue(key as any, (f ?? undefined) as any, { shouldValidate: true });\n  }\n\n  return (\n    <main className=\"mx-auto max-w-3xl px-4 py-8\">\n      <div className=\"mb-6 rounded border border-emerald-200 bg-emerald-50 px-3 py-2 text-sm text-emerald-900\">\n        Secure submission • QR contains only a random ID • Minimal non-PII metadata is stored temporarily for the verification demo\n      </div>\n\n      <h1 className=\"mb-4 text-2xl font-semibold text-slate-900\">Driver Registration</h1>\n\n      {submitError && (\n        <div className=\"mb-4 rounded border border-amber-300 bg-amber-50 px-3 py-2 text-sm text-amber-900\">\n          {submitError}\n        </div>\n      )}\n      {errorSummary && (\n        <div className=\"mb-4 rounded border border-rose-300 bg-rose-50 px-3 py-2 text-sm text-rose-900\">\n          <p className=\"font-medium\">Please fix the following:</p>\n          <ul className=\"list-inside list-disc\">\n            {errorSummary.slice(0, 6).map((m, i) => (\n              <li key={i}>{m}</li>\n            ))}\n          </ul>\n        </div>\n      )}\n      <form onSubmit={handleSubmit(onSubmit, onInvalid)} className=\"space-y-10\">\n        {/* Identity & Licence */}\n        <section className=\"space-y-4\">\n          <h2 className=\"text-lg font-medium\">Identity & Licence</h2>\n          <NameFields register={register} setValue={setValue} errors={errors} />\n          <div className=\"grid gap-4 sm:grid-cols-2\">\n            <Field label=\"Issuing jurisdiction\" err={errors.jurisdiction?.message}>\n              <select\n                {...register(\"jurisdiction\")}\n                className=\"mt-1 w-full rounded border border-slate-300 p-2\"\n              >\n                <option value=\"\">Select</option>\n                <option>CA-MB</option>\n                <option>CA-ON</option>\n                <option>CA-AB</option>\n                <option>CA-BC</option>\n                <option>CA-SK</option>\n                <option>CA-QC</option>\n                <option>CA-NB</option>\n                <option>CA-NL</option>\n                <option>CA-NS</option>\n                <option>CA-PE</option>\n                <option>CA-YT</option>\n                <option>CA-NT</option>\n                <option>CA-NU</option>\n              </select>\n            </Field>\n            <LicenseClassSelect\n              register={register}\n              setValue={setValue}\n              watch={watch}\n              errors={errors}\n            />\n            <Field label=\"Licence expiry\" err={errors.licenseExpiry?.message}>\n              <input\n                type=\"date\"\n                {...register(\"licenseExpiry\")}\n                className=\"mt-1 w-full rounded border border-slate-300 p-2\"\n                min={new Date().toISOString().slice(0, 10)}\n                max=\"2099-12-31\"\n              />\n            </Field>\n            <Field label=\"Date of birth\" err={errors.dob?.message}>\n              <input\n                type=\"date\"\n                {...register(\"dob\")}\n                className=\"mt-1 w-full rounded border border-slate-300 p-2\"\n                max={new Date(new Date().setFullYear(new Date().getFullYear() - 16))\n                  .toISOString()\n                  .slice(0, 10)}\n              />\n            </Field>\n          </div>\n          <LicenceInput\n            register={register}\n            setValue={setValue}\n            watch={watch}\n            errors={errors}\n          />\n        </section>\n\n        {/* Contact */}\n        <section className=\"space-y-4\">\n          <h2 className=\"text-lg font-medium\">Contact</h2>\n          <div className=\"grid gap-4 sm:grid-cols-2\">\n            <Field label=\"Email\" err={errors.email?.message}>\n              <input\n                type=\"email\"\n                {...register(\"email\")}\n                className=\"mt-1 w-full rounded border border-slate-300 p-2\"\n              />\n            </Field>\n            <PhoneInput\n              register={register}\n              setValue={setValue}\n              watch={watch}\n              errors={errors}\n            />\n          </div>\n        </section>\n\n        {/* Address */}\n        <section className=\"space-y-4\">\n          <h2 className=\"text-lg font-medium\">Address</h2>\n          <div className=\"grid gap-4 sm:grid-cols-2\">\n            <PostalInput register={register} setValue={setValue} errors={errors} />\n\n            {/* Region/Province/State (driven by country) */}\n            <RegionSelect register={register} setValue={setValue} watch={watch} errors={errors} />\n\n            {/* Country (CA/US only) */}\n            <AddressCountrySelect\n              register={register}\n              setValue={setValue}\n              watch={watch}\n              errors={errors}\n              label=\"Country\"\n            />\n\n            <Field label=\"City\">\n              <input {...register(\"city\")} className=\"mt-1 w-full rounded border border-slate-300 p-2\" />\n            </Field>\n            <Field label=\"Address line 1\">\n              <input {...register(\"address1\")} className=\"mt-1 w-full rounded border border-slate-300 p-2\" />\n            </Field>\n            <Field label=\"Address line 2\">\n              <input {...register(\"address2\")} className=\"mt-1 w-full rounded border border-slate-300 p-2\" />\n            </Field>\n          </div>\n        </section>\n        <StatusWizard\n          register={register}\n          watch={watch}\n          setValue={setValue}\n          errors={errors}\n        />\n\n        {/* PR card number */}\n        {needPR && (\n          <section className=\"space-y-3\">\n            <h3 className=\"font-medium\">Permanent Resident</h3>\n            <div className=\"grid gap-4 sm:grid-cols-2\">\n              <Field\n                label=\"PR card number (Document No.)\"\n                err={errors.prNumber?.message}\n              >\n                <input\n                  {...register(\"prNumber\")}\n                  className=\"mt-1 w-full rounded border border-slate-300 p-2 tracking-wider\"\n                  placeholder=\"AB12345678\"\n                />\n              </Field>\n            </div>\n          </section>\n        )}\n\n        {/* Passport (non-CA citizens) */}\n        {needPassport && (\n          <section className=\"space-y-3\">\n            <h3 className=\"font-medium\">Passport</h3>\n            <div className=\"grid gap-4 sm:grid-cols-2\">\n              <CountrySelect\n                name=\"passportCountry\"\n                label=\"Passport country\"\n                register={register}\n                setValue={setValue}\n                errors={errors}\n              />\n              <PassportInput\n                countryCode={passportCountry}\n                register={register}\n                setValue={setValue}\n                errors={errors}\n              />\n            </div>\n          </section>\n        )}\n\n        {/* Languages */}\n        <section className=\"space-y-4\">\n          <h2 className=\"text-lg font-medium\">Languages</h2>\n          <div className=\"grid gap-4 sm:grid-cols-2 items-end\">\n            <div>\n              <span className=\"block text-sm text-slate-700\">English</span>\n              <input\n                value=\"English\"\n                readOnly\n                className=\"mt-1 w-full rounded border border-slate-200 bg-slate-50 p-2 text-slate-700\"\n              />\n            </div>\n            <Field label=\"Level (required)\" err={errors.englishLevel?.message}>\n              <select\n                {...register(\"englishLevel\")}\n                className=\"mt-1 w-full rounded border border-slate-300 p-2\"\n                defaultValue=\"\"\n              >\n                <option value=\"\" disabled>\n                  Fluency\n                </option>\n                <option>Basic</option>\n                <option>Conversational</option>\n                <option>Fluent</option>\n                <option>Native</option>\n              </select>\n            </Field>\n          </div>\n          <OtherLanguagesRows\n            value={watch(\"otherLanguages\") || []}\n            onChange={(rows) =>\n              setValue(\"otherLanguages\", rows as any, { shouldValidate: true })\n            }\n          />\n        </section>\n\n        {/* Work Experience */}\n        <section className=\"space-y-3\">\n          <h2 className=\"text-lg font-medium\">Work Experience (last 3 years)</h2>\n          <div className=\"flex items-center justify-between\">\n            <span className=\"text-sm text-slate-700\">Add up to 10 entries</span>\n            <button\n              type=\"button\"\n              onClick={() => addWork({ company: \"\", role: \"\", start: \"\", end: \"\" })}\n              className=\"text-sm underline\"\n            >\n              Add\n            </button>\n          </div>\n          {work.map((w, idx) => (\n            <div key={w.id} className=\"grid gap-2 sm:grid-cols-4\">\n              <Field\n                label=\"Company\"\n                err={(errors.work?.[idx] as any)?.company?.message}\n              >\n                <input\n                  {...register(`work.${idx}.company` as const)}\n                  className=\"mt-1 rounded border border-slate-300 p-2\"\n                />\n              </Field>\n              <Field\n                label=\"Role\"\n                err={(errors.work?.[idx] as any)?.role?.message}\n              >\n                <input\n                  {...register(`work.${idx}.role` as const)}\n                  className=\"mt-1 rounded border border-slate-300 p-2\"\n                />\n              </Field>\n              <Field\n                label=\"From\"\n                err={(errors.work?.[idx] as any)?.start?.message}\n              >\n                <input\n                  type=\"date\"\n                  {...register(`work.${idx}.start` as const)}\n                  className=\"mt-1 rounded border border-slate-300 p-2\"\n                />\n              </Field>\n              <Field\n                label=\"To\"\n                err={(errors.work?.[idx] as any)?.end?.message}\n              >\n                <div className=\"flex items-center gap-2\">\n                  <input\n                    type=\"date\"\n                    {...register(`work.${idx}.end` as const)}\n                    className=\"mt-1 w-full rounded border border-slate-300 p-2\"\n                  />\n                  <button\n                    type=\"button\"\n                    className=\"text-sm underline\"\n                    onClick={() => removeWork(idx)}\n                  >\n                    Remove\n                  </button>\n                </div>\n              </Field>\n            </div>\n          ))}\n        </section>\n\n        {/* Documents */}\n        <section className=\"space-y-4\">\n          <h2 className=\"text-lg font-medium\">Documents</h2>\n          <DocUploadField\n            label=\"Licence - front\"\n            required\n            value={(watch(\"docLicenseFront\") as File | undefined) ?? null}\n            onChange={(f) => setFile(\"docLicenseFront\", f)}\n          />\n          <DocUploadField\n            label=\"Licence - back\"\n            required\n            value={(watch(\"docLicenseBack\") as File | undefined) ?? null}\n            onChange={(f) => setFile(\"docLicenseBack\", f)}\n          />\n          <DocUploadField\n            label=\"Health card\"\n            required\n            value={(watch(\"docHealthCard\") as File | undefined) ?? null}\n            onChange={(f) => setFile(\"docHealthCard\", f)}\n          />\n          {needPR && (\n            <DocUploadField\n              label=\"PR Card\"\n              required\n              value={(watch(\"docPR\") as File | undefined) ?? null}\n              onChange={(f) => setFile(\"docPR\", f)}\n            />\n          )}\n          {needPassport && (\n            <DocUploadField\n              label=\"Passport\"\n              required\n              value={(watch(\"docPassport\") as File | undefined) ?? null}\n              onChange={(f) => setFile(\"docPassport\", f)}\n            />\n          )}\n          {needPermit && (\n            <DocUploadField\n              label=\"Work/Study Permit\"\n              required\n              value={(watch(\"docPermit\") as File | undefined) ?? null}\n              onChange={(f) => setFile(\"docPermit\", f)}\n            />\n          )}\n          <p className=\"text-xs text-slate-500\">\n            Accepted: JPG/PNG • Max 4 MB each.\n          </p>\n        </section>\n\n        {/* Consent */}\n        <section className=\"space-y-2\">\n          <h2 className=\"text-lg font-medium\">Consent</h2>\n          <label className=\"flex items-start gap-2 text-sm text-slate-800\">\n            <input type=\"checkbox\" {...register(\"consentAbstract\")} className=\"mt-1\" />\n            I authorise [ORG] to request my driver abstract from the issuing authority.\n          </label>\n          <div className=\"grid gap-4 sm:grid-cols-3\">\n            <Field label=\"Type your name to sign\" err={errors.consentName?.message}>\n              <input\n                {...register(\"consentName\")}\n                className=\"mt-1 w-full rounded border border-slate-300 p-2\"\n              />\n            </Field>\n            <Field label=\"Date\" err={errors.consentDate?.message}>\n              <input\n                type=\"date\"\n                {...register(\"consentDate\")}\n                defaultValue={new Date().toISOString().slice(0, 10)}\n                className=\"mt-1 w-full rounded border border-slate-300 p-2\"\n              />\n            </Field>\n          </div>\n          <label className=\"flex items-start gap-2 text-sm text-slate-800\">\n            <input type=\"checkbox\" {...register(\"certifyAccurate\")} className=\"mt-1\" />\n            I certify the information provided is accurate.\n          </label>\n          {errors.consentAbstract?.message && (\n            <p className=\"text-xs text-rose-600\">{String(errors.consentAbstract.message)}</p>\n          )}\n          {errors.certifyAccurate?.message && (\n            <p className=\"text-xs text-rose-600\">{String(errors.certifyAccurate.message)}</p>\n          )}\n        </section>\n\n        {/* Submit */}\n        <div className=\"flex items-center gap-3 pt-2\">\n          <button\n            type=\"submit\"\n            className=\"rounded bg-emerald-600 px-4 py-2 text-white hover:bg-emerald-700 disabled:opacity-50\"\n            disabled={submitting}\n          >\n            {submitting ? \"Generating…\" : \"Submit & Generate QR\"}\n          </button>\n          <span className=\"text-sm text-slate-500\">\n            Data stays on your device for this demo. No upload occurs.\n          </span>\n        </div>\n      </form>\n\n      {/* Result */}\n      {qrPng && pdfUrl && (\n        <section className=\"mt-10 rounded border border-slate-200 p-4\">\n          <h3 className=\"mb-2 text-base font-medium\">Your QR & Card</h3>\n          <div className=\"flex items-center gap-6\">\n            <Image\n              src={qrPng}\n              alt=\"QR code\"\n              width={160}\n              height={160}\n              className=\"h-40 w-40 border border-slate-200\"\n            />\n            <div className=\"space-y-2\">\n              <a\n                href={pdfUrl}\n                download={`driver-card-${safeFileName(fullName || (qrid?.slice(0, 8) ?? \"card\"))}.pdf`}\n                className=\"inline-flex rounded bg-slate-900 px-4 py-2 text-white hover:bg-slate-800\"\n              >\n                Download Card (PDF)\n              </a>\n              <p className=\"text-sm text-slate-600\">\n                Card shows only your name and this QR. The QR contains only a random ID (no personal data). \n                A minimal non-PII snapshot is stored temporarily to enable verification.\n              </p>\n            </div>\n          </div>\n        </section>\n      )}\n    </main>\n  );\n}\n\nfunction Field({ label, err, children }: { label: string; err?: string; children: React.ReactNode }) {\n  return (\n    <label className=\"block\">\n      <span className=\"block text-sm text-slate-700\">{label}</span>\n      {children}\n      {err && <p className=\"text-xs text-rose-600\">{err}</p>}\n    </label>\n  );\n}\n\ntype LangLevel = \"Basic\" | \"Conversational\" | \"Fluent\" | \"Native\";\ntype Row = { language: string; level: LangLevel };\n\nfunction OtherLanguagesRows({\n  value,\n  onChange,\n}: {\n  value: Row[];\n  onChange: (rows: Row[]) => void;\n}) {\n  const rows: Row[] = value ?? [];\n\n  function add() {\n    onChange([...(rows || []), { language: \"\", level: \"Conversational\" }]);\n  }\n\n  function remove(idx: number) {\n    const next = [...rows] as Row[];\n    next.splice(idx, 1);\n    onChange(next);\n  }\n\n  function setRow(idx: number, patch: Partial<Row>) {\n    const next = [...rows] as Row[];\n    next[idx] = { ...next[idx], ...patch } as Row;\n    onChange(next);\n  }\n\n  return (\n    <div className=\"space-y-2\">\n      {rows.map((row, idx) => (\n        <div key={idx} className=\"grid gap-3 sm:grid-cols-3 items-end\">\n          <Field label=\"Other language\">\n            <input\n              list=\"all-languages\"\n              value={row.language}\n              onChange={(e) => setRow(idx, { language: e.target.value })}\n              className=\"mt-1 w-full rounded border border-slate-300 p-2\"\n              placeholder=\"Select language\"\n            />\n          </Field>\n          <Field label=\"Level\">\n            <select\n              value={row.level}\n              onChange={(e) =>\n                setRow(idx, { level: e.target.value as LangLevel })\n              }\n              className=\"mt-1 w-full rounded border border-slate-300 p-2\"\n            >\n              <option>Basic</option>\n              <option>Conversational</option>\n              <option>Fluent</option>\n              <option>Native</option>\n            </select>\n          </Field>\n          <div className=\"flex items-end\">\n            <button\n              type=\"button\"\n              onClick={() => remove(idx)}\n              className=\"ml-auto rounded border px-3 py-2 text-sm hover:bg-slate-50\"\n            >\n              Remove\n            </button>\n          </div>\n        </div>\n      ))}\n\n      <div className=\"flex\">\n        <button\n          type=\"button\"\n          onClick={add}\n          className=\"ml-auto inline-flex items-center gap-2 rounded bg-slate-900 px-3 py-2 text-sm text-white hover:bg-slate-800\"\n          title=\"Add another language\"\n        >\n          <span>+ Add language</span>\n        </button>\n      </div>\n\n      <datalist id=\"all-languages\">\n        {[\n          \"Arabic\",\"Bengali\",\"Chinese (Cantonese)\",\"Chinese (Mandarin)\",\"Dutch\",\"English\",\"Farsi\",\"French\",\"German\",\n          \"Gujarati\",\"Hebrew\",\"Hindi\",\"Italian\",\"Japanese\",\"Korean\",\"Malay\",\"Marathi\",\"Panjabi (Punjabi)\",\"Polish\",\n          \"Portuguese\",\"Punjabi\",\"Russian\",\"Spanish\",\"Tagalog\",\"Tamil\",\"Telugu\",\"Thai\",\"Turkish\",\"Ukrainian\",\"Urdu\",\"Vietnamese\",\n        ].map((l) => (\n          <option key={l} value={l} />\n        ))}\n      </datalist>\n    </div>\n  );\n}\n"],"names":[],"mappings":"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","debugId":null}}]
}