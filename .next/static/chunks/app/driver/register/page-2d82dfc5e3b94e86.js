(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[159],{3936:()=>{},5057:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>ei});var a=t(855),l=t(6863),r=t(9151),n=t(4660),i=t(7416);function o(e){return e.toUpperCase().replace(/[^A-Z0-9]/g,"")}function c(e){return e.replace(/[\s-]/g,"")}let d={"CA-AB":{format:e=>{let s=e.replace(/\D/g,"").slice(0,9);return s.length>6?"".concat(s.slice(0,6),"-").concat(s.slice(6)):s},test:e=>/^\d{9}$/.test(e)||/^\d{5,9}$/.test(e)},"CA-BC":{format:e=>e.replace(/\D/g,"").slice(0,8),test:e=>/^\d{7,8}$/.test(e)},"CA-MB":{format:e=>{let s=o(e).slice(0,12);if(!s)return"";let t=s.slice(0,2),a=s.slice(2,4);return[t,a,s.slice(4,6),s.slice(6)].filter(Boolean).join("-")},test:e=>/^[A-Z0-9]{12}$/.test(e)},"CA-NB":{format:e=>e.replace(/\D/g,"").slice(0,7),test:e=>/^\d{5,7}$/.test(e)},"CA-NL":{format:e=>{let s=o(e);return(s.slice(0,1)+s.slice(1,10)).toUpperCase()},test:e=>/^[A-Z]\d{9}$/.test(e)},"CA-NS":{format:e=>o(e).slice(0,14),test:e=>/^[A-Z0-9]{6,14}$/.test(e)},"CA-ON":{format:e=>{let s=o(e).slice(0,14),t=s.slice(0,1),a=s.slice(1,5);return[t+a,s.slice(5,10),s.slice(10,15)].filter(Boolean).join("-")},test:e=>/^[A-Z]\d{14}$/.test(e)},"CA-PE":{format:e=>e.replace(/\D/g,"").slice(0,6),test:e=>/^\d{5,6}$/.test(e)},"CA-QC":{format:e=>{let s=o(e);return(s.slice(0,1)+s.slice(1,13)).toUpperCase()},test:e=>/^[A-Z]\d{12}$/.test(e)},"CA-SK":{format:e=>e.replace(/\D/g,"").slice(0,8),test:e=>/^\d{8}$/.test(e)},"CA-DEFAULT":{format:e=>o(e).slice(0,15),test:e=>/^[A-Z0-9]{5,15}$/.test(e)}};function u(e){var s;let t=e.toUpperCase().replace(/\s+/g,"");if(!/^[ABCEGHJ-NPRSTVXY]\d[A-Z]\d[A-Z]\d$/.test(t))return{ok:!1};let a="".concat(t.slice(0,3)," ").concat(t.slice(3));return{ok:!0,normalized:a,province:null!=(s=({A:"NL",B:"NS",C:"PE",E:"NB",G:"QC",H:"QC",J:"QC",K:"ON",L:"ON",M:"ON",N:"ON",P:"ON",R:"MB",S:"SK",T:"AB",V:"BC",Y:"YT",X:"NT"})[t.charAt(0)])?s:void 0}}function m(e){return/^\d{5}(-\d{4})?$/.test(e.trim())}let p={"CA-MB":["1","2","3","4","5","6"],"CA-ON":["A","B","C","D","E","F","G","M"],"CA-BC":["1","2","3","4","5","6","7","8"],"CA-AB":["1","2","3","4","5","6","7"],"CA-SK":["1","2","3","4","5","6","7"],"CA-QC":["1","2","3","4","5","6"],"CA-NB":["1","2","3","4","5","6","7"],"CA-NL":["1","2","3","4","5","6"],"CA-NS":["1","2","3","4","5","6","7"],"CA-PE":["1","2","3","4","5"]};function x(e){var s;return null!=(s=p[e])?s:[]}function h(e){return(e||"").toUpperCase().replace(/[\s\-.]/g,"")}let g={CA:{re:/^[A-Z]{2}\d{6}$/,minLen:8,maxLen:8,hint:"AA123456"},US:{re:/^([A-Z]\d{8}|\d{9})$/,minLen:9,maxLen:9,hint:"A12345678 or 123456789"},IN:{re:/^[A-Z]\d{7}$/,minLen:8,maxLen:8,hint:"A1234567"},PH:{re:/^([A-Z]\d{6}|[A-Z]{2}\d{6,7}|[A-Z]\d{7}[A-Z])$/,minLen:7,maxLen:9,hint:"P1234567 / AB123456 / AB1234567"},GB:{re:/^\d{9}$/,minLen:9,maxLen:9,hint:"123456789"},PK:{re:/^[A-Z]{2}\d{7}$/,minLen:9,maxLen:9,hint:"AB1234567"},BD:{re:/^[A-Z]\d{7}$/,minLen:8,maxLen:8,hint:"A1234567"},NG:{re:/^[A-Z]\d{8}$/,minLen:9,maxLen:9,hint:"A12345678"},CN:{re:/^[EGDSP]\d{8}$/,minLen:9,maxLen:9,hint:"E12345678"},MX:{re:/^[A-Z]\d{8}$/,minLen:9,maxLen:9,hint:"A12345678"}},b={re:/^[A-Z0-9]{6,10}$/,minLen:6,maxLen:10,hint:"6–10 letters/digits"};var N=t(7043),j=t(3544);function C(e){if(!e)return!1;let s=e.toUpperCase();try{return!!N.alpha2ToNumeric(s)}catch(e){return!1}}function f(e){var s;let t=(e||"").toUpperCase();return C(t)&&null!=(s=g[t])?s:b}N.registerLocale(j);let v=i.YjP().regex(/^\d{4}-\d{2}-\d{2}$/,"Use YYYY-MM-DD"),y=i.YjP().trim().min(2,"Enter at least 2 characters").max(60,"Too long").regex(/^[A-Za-zÀ-ÖØ-öø-ÿ' -]+$/,"Letters, spaces, hyphens, apostrophes only"),A=i.k5n(["CA-AB","CA-BC","CA-MB","CA-NB","CA-NL","CA-NS","CA-ON","CA-PE","CA-QC","CA-SK","CA-YT","CA-NT","CA-NU"],{message:"Select issuing authority"}),w=i.YjP().email("Enter a valid email"),P=i.k5n(["CA"]).default("CA"),k=i.YjP().regex(/^\d{10}$/,"Enter a 10-digit Canadian phone number"),S=i.YjP().trim().min(3,"Enter licence number").max(20,"Too long").regex(/^[A-Za-z0-9-]+$/,"Letters/numbers only"),L=i.k5n(["Basic","Conversational","Fluent","Native"]),D=i.YjP().trim().toUpperCase().regex(/^[A-Z0-9]{6,10}$/,"6–10 letters/digits"),B=i.YjP().trim().regex(/^\d{10}$/,"PR number must be exactly 10 digits"),E=i.Nlp(File,{message:"File required"}),I=i.Ikc({givenName:y,surname:y,middleName:i.YjP().trim().max(60).optional().or(i.euz("")),givenNameKey:i.YjP().optional(),surnameKey:i.YjP().optional(),jurisdiction:A,licenseNo:S,licenseClass:i.YjP().min(1,"Select class").max(5),airBrake:i.zMY().optional(),licenseExpiry:v,dob:v,gender:i.k5n(["Male","Female","Non-binary","Prefer not to say"]).optional(),email:w,phone:k,phoneCountry:P,address1:i.YjP().trim().max(100).optional().or(i.euz("")),address2:i.YjP().trim().max(100).optional().or(i.euz("")),city:i.YjP().trim().max(60).optional().or(i.euz("")),region:i.YjP().trim().max(40).optional().or(i.euz("")),postal:i.YjP().trim().min(3,"Enter postal/ZIP"),addressCountry:i.YjP().trim().length(2,"Use ISO2 (e.g., CA)").optional(),citizenship:i.k5n(["Canadian Citizen","Non-Citizen"]).default("Canadian Citizen"),residencyCA:i.k5n(["Citizen","Permanent Resident","Work Permit","Study Permit"]).default("Citizen"),prNumber:i.YjP().optional(),permitType:i.YjP().optional(),permitExpiry:v.optional(),uci:i.YjP().optional(),passportCountry:i.YjP().optional(),passportNumber:i.YjP().optional(),englishLevel:L,otherLanguages:i.YOg(i.Ikc({language:i.YjP().min(1,"Choose a language"),level:L})).max(20).optional(),work:i.YOg(i.Ikc({company:i.YjP().trim().min(2,"Enter company"),role:i.YjP().trim().min(2,"Enter role"),start:v,end:v}).refine(e=>new Date(e.start)<=new Date(e.end),{message:"From must be before To",path:["end"]})).max(10).optional(),consentAbstract:i.zMY().refine(e=>!0===e,{message:"Consent is required"}),consentName:y,consentDate:v,certifyAccurate:i.zMY().refine(e=>!0===e,{message:"You must certify accuracy"}),docLicenseFront:E,docLicenseBack:E,docHealthCard:E,docPassport:i.Nlp(File).optional(),docPR:i.Nlp(File).optional(),docPermit:i.Nlp(File).optional()}).superRefine((e,s)=>{var t,a,l,r;let n=new Date,i=new Date(n.getFullYear()-16,n.getMonth(),n.getDate()),o=new Date(e.dob),p=new Date(e.licenseExpiry);(isNaN(o.getTime())||o>i)&&s.addIssue({code:"custom",path:["dob"],message:"Driver must be at least 16 years old"}),(isNaN(p.getTime())||p<n)&&s.addIssue({code:"custom",path:["licenseExpiry"],message:"Expiry must be in the future"}),!function(e,s){var t;let a=d["CA-DEFAULT"];return(null!=(t=d[e])?t:a).test(c(s.toUpperCase()))}(e.jurisdiction,e.licenseNo)&&s.addIssue({code:"custom",path:["licenseNo"],message:"Number doesn’t match jurisdiction format"});let g=x(e.jurisdiction);if(g.length>0&&!g.includes(e.licenseClass)&&s.addIssue({code:"custom",path:["licenseClass"],message:"Select a valid class for ".concat(e.jurisdiction)}),u(e.postal).ok||m(e.postal)||s.addIssue({code:"custom",path:["postal"],message:"Enter a valid Canadian postal code or US ZIP"}),"Canadian Citizen"===e.citizenship&&"Citizen"!==e.residencyCA&&s.addIssue({code:"custom",path:["residencyCA"],message:"Canadian citizens must select Citizen"}),"Non-Citizen"===e.citizenship){if(e.passportCountry&&C(e.passportCountry)||s.addIssue({code:"custom",path:["passportCountry"],message:"Select a valid country"}),null==(t=e.passportNumber)?void 0:t.trim()){if(e.passportCountry&&(l=e.passportCountry,r=e.passportNumber,!f(l).re.test(h(r))&&!D.safeParse(e.passportNumber).success)){let t=f(e.passportCountry);s.addIssue({code:"custom",path:["passportNumber"],message:"Format doesn’t match (".concat(t.hint||"6–10 letters/digits",")")})}}else s.addIssue({code:"custom",path:["passportNumber"],message:"Enter passport number"});e.docPassport||s.addIssue({code:"custom",path:["docPassport"],message:"Upload passport image"})}"Permanent Resident"===e.residencyCA&&(e.prNumber&&B.safeParse(e.prNumber).success||s.addIssue({code:"custom",path:["prNumber"],message:"PR number must be exactly 10 digits"}),e.docPR||s.addIssue({code:"custom",path:["docPR"],message:"Upload PR card image"})),("Work Permit"===e.residencyCA||"Study Permit"===e.residencyCA)&&(e.docPermit||s.addIssue({code:"custom",path:["docPermit"],message:"Upload permit document image"}),"Work Permit"!==e.residencyCA||(null==(a=e.permitType)?void 0:a.trim())||s.addIssue({code:"custom",path:["permitType"],message:"Select permit type"})),[["docLicenseFront",e.docLicenseFront],["docLicenseBack",e.docLicenseBack],["docHealthCard",e.docHealthCard],["docPassport",e.docPassport],["docPR",e.docPR],["docPermit",e.docPermit]].forEach(e=>{let[t,a]=e;if(a){let e=["image/jpeg","image/png"].includes(a.type),l=a.size<=4194304;e&&l||s.addIssue({code:"custom",path:[t],message:"Upload JPG/PNG ≤ 4MB"})}})}),M=["image/jpeg","image/png"];function z(e){let{label:s,hint:t,value:r,onChange:n,id:i,required:o=!1}=e,c=(0,l.useId)(),d=null!=i?i:c,[u,m]=(0,l.useState)(null);return(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("label",{htmlFor:d,className:"block text-sm font-medium text-slate-700",children:[s," ",o&&(0,a.jsx)("span",{className:"text-rose-600",children:"*"})]}),(0,a.jsx)("div",{className:"flex items-center gap-3",children:(0,a.jsx)("input",{id:d,type:"file",accept:M.join(","),className:"block w-full text-sm file:mr-4 file:rounded file:border-0 file:bg-slate-900 file:px-3 file:py-2 file:text-white hover:file:bg-slate-800",onChange:function(e){var t,a;let l=null!=(a=null==(t=e.target.files)?void 0:t[0])?a:null;if(!l){o&&m("".concat(s," is required"));return}return M.includes(l.type)?l.size>4194304?void m("File must be ≤ 4 MB"):void(m(null),n(l)):void m("Only JPG or PNG accepted")}})}),t&&(0,a.jsx)("p",{className:"text-xs text-slate-500",children:t}),u&&(0,a.jsx)("p",{className:"text-xs text-rose-600","aria-live":"polite",children:u}),r&&(0,a.jsxs)("div",{className:"flex items-center gap-3 rounded border border-slate-200 p-2 text-xs text-slate-600",children:[r.name," • ",(r.size/1024/1024).toFixed(1)," MB",(0,a.jsx)("button",{type:"button",className:"ml-auto text-xs underline",onClick:function(){n(null),m(o?"".concat(s," is required"):null)},children:"Remove"})]})]})}var Y=t(1857);let V=Y.vv.create({page:{padding:20,fontSize:10,color:"#0A0F1F"},card:{borderWidth:1,borderColor:"#e5e7eb",padding:12,borderRadius:6},row:{flexDirection:"row",gap:10},col:{flexGrow:1},title:{fontSize:14,marginBottom:6},label:{color:"#6b7280"}});function R(e){let{name:s,qrPng:t}=e;return(0,a.jsx)(Y.yo,{children:(0,a.jsx)(Y.YW,{size:"A6",style:V.page,children:(0,a.jsxs)(Y.Ss,{style:V.card,children:[(0,a.jsx)(Y.EY,{style:V.title,children:"Driver Identity Card"}),(0,a.jsxs)(Y.Ss,{style:V.row,children:[(0,a.jsx)(Y.Ss,{style:V.col,children:(0,a.jsxs)(Y.EY,{children:[(0,a.jsx)(Y.EY,{style:V.label,children:"Name: "}),s]})}),(0,a.jsx)(Y._V,{src:t,style:{width:120,height:120}})]}),(0,a.jsx)(Y.EY,{style:{marginTop:8,color:"#6b7280"},children:"Scan for live verification. QR encodes only a random ID; no personal details."})]})})})}var U=t(3883);async function T(e){return U.toDataURL(JSON.stringify(e),{errorCorrectionLevel:"M",margin:1,scale:6})}var O=t(5007),F=t(9813);let Z=/[A-Za-zÀ-ÖØ-öø-ÿ' -]/,$=/[^A-Za-zÀ-ÖØ-öø-ÿ' -]+/g;function K(e){var s,t,l;let{register:r,setValue:n,errors:i}=e;function o(e,s){let t=e.target.value.replace($,"");t.length>60&&(t=t.slice(0,60)),n(s,t,{shouldValidate:!0})}function c(e,s,t){let a=e.target.value.trim().toLowerCase().replace(RegExp("\\b[\\p{L}\\p{M}]+","gu"),e=>{var s,t;return(null!=(t=null==(s=e[0])?void 0:s.toUpperCase())?t:"")+e.slice(1)});n(s,a,{shouldValidate:!0}),t&&n(t,a.normalize("NFD").replace(RegExp("\\p{Diacritic}","gu"),"").toUpperCase().replace(/\s+/g," ").trim())}function d(e){"Backspace"===e.key||"Delete"===e.key||"ArrowLeft"===e.key||"ArrowRight"===e.key||"Tab"===e.key||e.metaKey||e.ctrlKey||Z.test(e.key)||e.preventDefault()}return(0,a.jsxs)("div",{className:"grid gap-4 sm:grid-cols-3",children:[(0,a.jsx)(G,{label:"Given name",err:null==(s=i.givenName)?void 0:s.message,children:(0,a.jsx)("input",{...r("givenName"),className:"mt-1 w-full rounded border border-slate-300 p-2",maxLength:60,onKeyDown:d,onChange:e=>o(e,"givenName"),onBlur:e=>c(e,"givenName","givenNameKey"),autoComplete:"given-name"})}),(0,a.jsx)(G,{label:"Middle (optional)",err:null==(t=i.middleName)?void 0:t.message,children:(0,a.jsx)("input",{...r("middleName"),className:"mt-1 w-full rounded border border-slate-300 p-2",maxLength:60,onKeyDown:d,onChange:e=>o(e,"middleName"),onBlur:e=>c(e,"middleName"),autoComplete:"additional-name"})}),(0,a.jsx)(G,{label:"Surname",err:null==(l=i.surname)?void 0:l.message,children:(0,a.jsx)("input",{...r("surname"),className:"mt-1 w-full rounded border border-slate-300 p-2",maxLength:60,onKeyDown:d,onChange:e=>o(e,"surname"),onBlur:e=>c(e,"surname","surnameKey"),autoComplete:"family-name"})})]})}function G(e){let{label:s,err:t,children:l}=e;return(0,a.jsxs)("label",{className:"block",children:[(0,a.jsx)("span",{className:"block text-sm text-slate-700",children:s}),l,t&&(0,a.jsx)("p",{className:"text-xs text-rose-600",children:t})]})}function W(e){var s;let{register:t,setValue:r,errors:n}=e,[i,o]=(0,l.useState)("");return(0,a.jsxs)("div",{className:"grid gap-3 sm:grid-cols-[8rem_1fr]",children:[(0,a.jsxs)("label",{className:"block",children:[(0,a.jsx)("span",{className:"block text-sm text-slate-700",children:"Country"}),(0,a.jsx)("select",{...t("phoneCountry"),defaultValue:"CA",className:"mt-1 w-full rounded border border-slate-300 p-2",children:(0,a.jsx)("option",{value:"CA",children:"Canada (+1)"})})]}),(0,a.jsxs)("label",{className:"block",children:[(0,a.jsx)("span",{className:"block text-sm text-slate-700",children:"Phone"}),(0,a.jsx)("input",{...t("phone"),value:i,onChange:e=>{let s=e.target.value.replace(/\D/g,"").slice(0,10);o(s),r("phone",s,{shouldValidate:!0})},inputMode:"numeric",pattern:"\\d{10}",className:"mt-1 w-full rounded border border-slate-300 p-2",placeholder:"2045551234"}),(null==(s=n.phone)?void 0:s.message)&&(0,a.jsx)("p",{className:"text-xs text-rose-600",children:n.phone.message})]})]})}function H(e){var s;let{register:t,setValue:l,errors:r}=e;return(0,a.jsxs)("label",{className:"block",children:[(0,a.jsx)("span",{className:"block text-sm text-slate-700",children:"Postal/ZIP"}),(0,a.jsx)("input",{...t("postal"),className:"mt-1 w-full rounded border border-slate-300 p-2",placeholder:"A1A 1A1 or 90210",maxLength:7,onInput:e=>{let s=e.target,t=s.value.toUpperCase().replace(/[^A-Z0-9\s-]/g,"");/^[ABCEGHJ-NPRSTVXY]\d[A-Z]?/i.test(t.replace(/\s/g,""))?s.value=function(e){let s=e.replace(/\s+/g,"").slice(0,6);return s.length>3?"".concat(s.slice(0,3)," ").concat(s.slice(3)):s}(t):/^\d/.test(t)&&(s.value=t.replace(/\D/g,"").slice(0,10))},onBlur:e=>{let s=e.target.value.trim(),t=u(s);if(t.ok){t.normalized&&l("postal",t.normalized),l("addressCountry","CA"),t.province&&l("region",t.province);return}m(s)&&l("addressCountry","US")}}),(null==(s=r.postal)?void 0:s.message)&&(0,a.jsx)("p",{className:"text-xs text-rose-600",children:r.postal.message})]})}function Q(e){var s;let{register:t,setValue:l,watch:r,errors:n}=e,i=r("jurisdiction");return(0,a.jsxs)("label",{className:"block",children:[(0,a.jsx)("span",{className:"block text-sm text-slate-700",children:"Licence number"}),(0,a.jsx)("input",{...t("licenseNo"),className:"mt-1 w-full rounded border border-slate-300 p-2 font-mono tracking-wider",placeholder:function(e){switch(e){case"CA-ON":return"A####-#####-#####";case"CA-BC":return"####### or ########";case"CA-AB":return"######-### or 5–9 digits";case"CA-SK":return"########";case"CA-QC":return"A############";case"CA-NL":return"A#########";case"CA-MB":return"####### (7 digits)";case"CA-NB":case"CA-NS":case"CA-PE":return"Up to 8 digits";default:return"Up to 15 letters/digits"}}(i),onInput:function(e){let s=e.target,t=s.value.toUpperCase().replace(/[^A-Z0-9-]/g,"");s.value=t=function(e,s){var t;let a=d["CA-DEFAULT"];return(null!=(t=d[e])?t:a).format(s)}(i,t),l("licenseNo",t,{shouldValidate:!0})},maxLength:20,autoComplete:"off"}),(null==(s=n.licenseNo)?void 0:s.message)&&(0,a.jsx)("p",{className:"text-xs text-rose-600",children:n.licenseNo.message}),(0,a.jsx)("p",{className:"mt-1 text-xs text-slate-500",children:"Enter only letters/numbers (formatting applied automatically)."})]})}function q(e){var s,t,l;let{register:r,watch:n,setValue:i,errors:o}=e,c=null!=(l=n("citizenship"))?l:"CA";return n("residencyCA"),(0,a.jsxs)("section",{className:"space-y-4",children:[(0,a.jsx)("h2",{className:"text-lg font-medium",children:"Status in Canada"}),(0,a.jsxs)("div",{className:"grid gap-4 sm:grid-cols-3",children:[(0,a.jsxs)("label",{className:"block",children:[(0,a.jsx)("span",{className:"block text-sm text-slate-700",children:"Citizenship"}),(0,a.jsxs)("select",{...r("citizenship"),defaultValue:c,onChange:function(e){let s=e.target.value;i("citizenship",s,{shouldValidate:!0}),"Canadian Citizen"===s&&(i("passportCountry",void 0,{shouldValidate:!0}),i("passportNumber",void 0,{shouldValidate:!0}),i("docPassport",void 0,{shouldValidate:!0}))},className:"mt-1 w-full rounded border border-slate-300 p-2",children:[(0,a.jsx)("option",{value:"Canadian Citizen",children:"Canadian Citizen"}),(0,a.jsx)("option",{value:"Non-Citizen",children:"Non-Citizen"})]}),(null==(s=o.citizenship)?void 0:s.message)&&(0,a.jsx)("p",{className:"text-xs text-rose-600",children:String(o.citizenship.message)})]}),(0,a.jsxs)("label",{className:"block",children:[(0,a.jsx)("span",{className:"block text-sm text-slate-700",children:"Residency"}),"Canadian Citizen"===n("citizenship")?(0,a.jsx)("input",{type:"text",value:"Citizen",readOnly:!0,className:"mt-1 w-full rounded border border-slate-300 bg-slate-100 p-2 text-slate-600"}):(0,a.jsxs)("select",{...r("residencyCA"),className:"mt-1 w-full rounded border border-slate-300 p-2",defaultValue:"",children:[(0,a.jsx)("option",{value:"",disabled:!0,children:"Select residency"}),(0,a.jsx)("option",{value:"Permanent Resident",children:"Permanent Resident"}),(0,a.jsx)("option",{value:"Work Permit",children:"Work Permit"}),(0,a.jsx)("option",{value:"Study Permit",children:"Study Permit"})]}),(null==(t=o.residencyCA)?void 0:t.message)&&(0,a.jsx)("p",{className:"text-xs text-rose-600",children:o.residencyCA.message})]})]})]})}let J={"CA-ON":"Air brake (Z)","CA-MB":"Air brake (A)","CA-AB":"Air brake (Q/endorsement)","CA-SK":"Air brake","CA-BC":"Air brake","CA-QC":"Air brake (F endorsement)","CA-NB":"Air brake","CA-NL":"Air brake","CA-NS":"Air brake","CA-PE":"Air brake","CA-YT":"Air brake","CA-NT":"Air brake","CA-NU":"Air brake"};function _(e){var s,t;let{register:r,setValue:n,watch:i,errors:o}=e,c=i("jurisdiction"),d=i("licenseClass"),u=c?x(c):[],m=null!=(t=J[null!=c?c:""])?t:"Air brake";return(0,l.useEffect)(()=>{n("licenseClass","",{shouldValidate:!0})},[c,n]),(0,a.jsxs)("div",{className:"grid gap-4 sm:grid-cols-2",children:[(0,a.jsxs)("label",{className:"block",children:[(0,a.jsx)("span",{className:"block text-sm text-slate-700",children:"Licence class"}),(0,a.jsxs)("select",{...r("licenseClass"),disabled:!c,value:null!=d?d:"",onChange:e=>n("licenseClass",e.target.value,{shouldValidate:!0}),className:"mt-1 w-full rounded border border-slate-300 p-2",children:[(0,a.jsx)("option",{value:"",disabled:!0,children:c?"Select class":"Select jurisdiction first"}),c&&0===u.length&&(0,a.jsx)("option",{value:"",disabled:!0,children:"No classes found"}),u.map(e=>(0,a.jsx)("option",{value:e,children:e},e))]}),(null==o||null==(s=o.licenseClass)?void 0:s.message)&&(0,a.jsx)("p",{className:"text-xs text-rose-600",children:String(o.licenseClass.message)})]}),(0,a.jsxs)("label",{className:"mt-6 inline-flex items-center gap-2",children:[(0,a.jsx)("input",{type:"checkbox",...r("airBrake"),className:"h-4 w-4"}),(0,a.jsx)("span",{className:"text-sm text-slate-700",children:m})]})]})}let X=Object.entries(N.getNames("en",{select:"official"})).map(e=>{let[s,t]=e;return{code:s.toUpperCase(),name:t}}).sort((e,s)=>e.name.localeCompare(s.name));function ee(e){let{name:s,label:t="Country",register:r,setValue:n,errors:i,defaultCode:o,searchable:c=!0}=e,[d,u]=(0,l.useState)(""),m=(0,l.useMemo)(()=>{if(!c)return X;let e=d.trim().toLowerCase();return e?X.filter(s=>s.name.toLowerCase().includes(e)||s.code.toLowerCase().includes(e)):X},[d,c]);function p(){let e=null==i?void 0:i[s],t=null==e?void 0:e.message;return"string"==typeof t?t:void 0}return(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsx)("label",{className:"block",children:(0,a.jsx)("span",{className:"block text-sm text-slate-700",children:t})}),(0,a.jsxs)("div",{className:c?"grid gap-2 sm:grid-cols-[1fr_18rem]":"w-full",children:[c&&(0,a.jsx)("input",{value:d,onChange:e=>u(e.target.value),className:"rounded border border-slate-300 p-2",placeholder:"Search country…"}),(0,a.jsxs)("select",{...r(s),defaultValue:null!=o?o:"",onChange:e=>n(s,e.target.value,{shouldValidate:!0,shouldDirty:!0}),className:"rounded border border-slate-300 p-2 w-full",children:[(0,a.jsx)("option",{value:"",disabled:!0,children:"Select country"}),m.map(e=>(0,a.jsx)("option",{value:e.code,children:e.name},e.code))]})]}),p()&&(0,a.jsx)("p",{className:"text-xs text-rose-600",children:p()})]})}function es(e){var s;let{countryCode:t,register:r,setValue:n,errors:i}=e,[o,c]=(0,l.useState)(""),d=(0,l.useMemo)(()=>f(t),[t]),u=(0,l.useRef)(null);return(0,l.useEffect)(()=>{if(u.current)if(d.maxLen&&o.length>d.maxLen){let e=o.slice(0,d.maxLen);c(e),n("passportNumber",e,{shouldValidate:!0})}else n("passportNumber",o,{shouldValidate:!0})},[t]),(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsx)("label",{className:"block",children:(0,a.jsx)("span",{className:"block text-sm text-slate-700",children:"Passport number"})}),(0,a.jsx)("input",{...r("passportNumber"),ref:e=>{let s=r("passportNumber");"function"==typeof s.ref?s.ref(e):s.ref&&(s.ref.current=e),u.current=e},value:o,onChange:e=>{let s=e.target.value.toUpperCase().replace(/[^A-Z0-9]/g,"");d.maxLen&&(s=s.slice(0,d.maxLen)),c(s),n("passportNumber",s,{shouldValidate:!0})},onBlur:e=>{let s=h(e.target.value);c(s),n("passportNumber",s,{shouldValidate:!0})},inputMode:"text",autoCapitalize:"characters",className:"mt-1 w-full rounded border border-slate-300 p-2 font-mono tracking-wider",placeholder:d.hint||"e.g., K1234567","aria-describedby":"passport-hint"}),(0,a.jsxs)("p",{id:"passport-hint",className:"text-xs text-slate-500",children:[t?"Expected format for ".concat(t.toUpperCase(),": "):"Expected format: ",d.hint||"6–10 letters/digits"]}),(null==i||null==(s=i.passportNumber)?void 0:s.message)&&(0,a.jsx)("p",{className:"text-xs text-rose-600",children:String(i.passportNumber.message)})]})}function et(e){var s;let{register:t,setValue:l,watch:r,errors:n,label:i="Country"}=e,o=r("addressCountry")||"",c=null==(s=n.addressCountry)?void 0:s.message;return(0,a.jsxs)("label",{className:"block",children:[(0,a.jsx)("span",{className:"block text-sm text-slate-700",children:i}),(0,a.jsxs)("select",{...t("addressCountry"),value:null!=o?o:"",onChange:function(e){l("addressCountry",e.target.value,{shouldValidate:!0}),l("region","",{shouldValidate:!0})},className:"mt-1 w-full rounded border border-slate-300 p-2",children:[(0,a.jsx)("option",{value:"",disabled:!0,children:"Select country"}),(0,a.jsx)("option",{value:"CA",children:"Canada"}),(0,a.jsx)("option",{value:"US",children:"United States"})]}),c&&(0,a.jsx)("p",{className:"text-xs text-rose-600",children:c})]})}let ea=[["AB","Alberta"],["BC","British Columbia"],["MB","Manitoba"],["NB","New Brunswick"],["NL","Newfoundland and Labrador"],["NS","Nova Scotia"],["NT","Northwest Territories"],["NU","Nunavut"],["ON","Ontario"],["PE","Prince Edward Island"],["QC","Quebec"],["SK","Saskatchewan"],["YT","Yukon"]],el=[["AL","Alabama"],["AK","Alaska"],["AZ","Arizona"],["AR","Arkansas"],["CA","California"],["CO","Colorado"],["CT","Connecticut"],["DE","Delaware"],["FL","Florida"],["GA","Georgia"],["HI","Hawaii"],["ID","Idaho"],["IL","Illinois"],["IN","Indiana"],["IA","Iowa"],["KS","Kansas"],["KY","Kentucky"],["LA","Louisiana"],["ME","Maine"],["MD","Maryland"],["MA","Massachusetts"],["MI","Michigan"],["MN","Minnesota"],["MS","Mississippi"],["MO","Missouri"],["MT","Montana"],["NE","Nebraska"],["NV","Nevada"],["NH","New Hampshire"],["NJ","New Jersey"],["NM","New Mexico"],["NY","New York"],["NC","North Carolina"],["ND","North Dakota"],["OH","Ohio"],["OK","Oklahoma"],["OR","Oregon"],["PA","Pennsylvania"],["RI","Rhode Island"],["SC","South Carolina"],["SD","South Dakota"],["TN","Tennessee"],["TX","Texas"],["UT","Utah"],["VT","Vermont"],["VA","Virginia"],["WA","Washington"],["WV","West Virginia"],["WI","Wisconsin"],["WY","Wyoming"],["DC","District of Columbia"]];function er(e){var s;let{register:t,setValue:l,watch:r,errors:n,label:i="Region/Province/State"}=e,o=r("addressCountry")||"",c=r("region"),d=null==(s=n.region)?void 0:s.message,u="CA"===o?ea:"US"===o?el:null;return(0,a.jsxs)("label",{className:"block",children:[(0,a.jsx)("span",{className:"block text-sm text-slate-700",children:i}),(0,a.jsxs)("select",{...t("region"),value:null!=c?c:"",onChange:e=>l("region",e.target.value,{shouldValidate:!0}),className:"mt-1 w-full rounded border border-slate-300 p-2",disabled:!u,children:[(0,a.jsx)("option",{value:"",disabled:!0,children:"CA"===o?"Select province/territory":"US"===o?"Select state":"Select a country first"}),null==u?void 0:u.map(e=>{let[s,t]=e;return(0,a.jsx)("option",{value:s,children:t},s)})]}),d&&(0,a.jsx)("p",{className:"text-xs text-rose-600",children:d})]})}var en=t(8061);function ei(){var e,s,t,i,o,d,u,m,p,x,g,b,N,j,C,f,v,y,A,w;let{register:P,handleSubmit:k,control:S,formState:{errors:L},watch:D,setValue:B}=(0,r.mN)({resolver:(0,n.u)(I),defaultValues:{englishLevel:"Conversational",phoneCountry:"CA",citizenship:"Canadian Citizen",residencyCA:"Citizen",consentDate:new Date().toISOString().slice(0,10),certifyAccurate:!1,otherLanguages:[]}}),{fields:E,append:M,remove:V}=(0,r.jz)({control:S,name:"work"}),[U,Z]=(0,l.useState)(!1),[$,G]=(0,l.useState)(null),[J,X]=(0,l.useState)(null),[ea,el]=(0,l.useState)(null),[ei,ed]=(0,l.useState)(null),[eu,em]=(0,l.useState)(null),ep=D("citizenship"),ex=D("residencyCA"),eh=D("passportCountry"),eg="Canadian Citizen"!==ep,eb="Work Permit"===ex||"Study Permit"===ex,eN="Permanent Resident"===ex,[ej,eC]=(0,l.useState)(null),ef=[D("givenName")||"",D("middleName")||"",D("surname")||""].filter(Boolean).join(" ");async function ev(e){Z(!0);try{var s,t,l,r,n,i,o,d,u,m,p,x,g;ed(null),em(null);let b=function(e){let s={...e};return(s.licenseNo=c(s.licenseNo.toUpperCase()),"CA"===s.phoneCountry&&/^\d{10}$/.test(s.phone)&&(s.phone="+1".concat(s.phone)),s.passportCountry&&s.passportNumber)?s.passportNumber=h(s.passportNumber):s.passportNumber=void 0,s.prNumber&&(s.prNumber=s.prNumber.toUpperCase()),s.uci&&(s.uci=s.uci.replace(/\D/g,"")),s}(e),N=function(){if("undefined"!=typeof crypto){let t=crypto;if("function"==typeof t.randomUUID)return t.randomUUID();if("function"==typeof t.getRandomValues){var e,s;let a=new Uint8Array(16);t.getRandomValues(a);let l=null!=(e=a[6])?e:0;a[6]=15&l|64;let r=null!=(s=a[8])?s:0;a[8]=63&r|128;let n=Array.from(a,e=>e.toString(16).padStart(2,"0")).join("");return"".concat(n.slice(0,8),"-").concat(n.slice(8,12),"-").concat(n.slice(12,16),"-").concat(n.slice(16,20),"-").concat(n.slice(20))}}return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,e=>{let s=16*Math.random()|0;return("x"===e?s:3&s|8).toString(16)})}();el(N);let j=function(){let e="ABCDEFGHJKLMNPQRSTUVWXYZ",s="23456789",t=[e[Math.floor(Math.random()*e.length)],s[Math.floor(Math.random()*s.length)]],a=e+s;for(;t.length<4;)t.push(a[Math.floor(Math.random()*a.length)]);return t.sort(()=>Math.random()-.5).join("")}();eC(j);let C=function(e){var s;let t=null!=(s=e.origin)?s:window.location.origin;return{v:1,url:"".concat(t,"/v/").concat(e.qrid)}}({qrid:N,origin:window.location.origin}),f=await T(C);G(f);let v={qrid:N,pinHash:(0,en.Y)(j),name:[b.givenName,b.middleName,b.surname].filter(Boolean).join(" "),dob:b.dob,citizenship:b.citizenship,residencyCA:b.residencyCA,jurisdiction:b.jurisdiction,licenseNo:b.licenseNo,licenseClass:b.licenseClass,licenseExpiry:b.licenseExpiry,email:b.email,phone:b.phone,postal:b.postal,country:null!=(s=b.addressCountry)?s:"",region:null!=(t=b.region)?t:"",city:null!=(l=b.city)?l:"",address1:null!=(r=b.address1)?r:"",address2:null!=(n=b.address2)?n:"",prNumber:null!=(i=b.prNumber)?i:"",permitType:null!=(o=b.permitType)?o:"",uci:null!=(d=b.uci)?d:"",permitExpiry:null!=(u=b.permitExpiry)?u:"",passportCountry:null!=(m=b.passportCountry)?m:"",passportNumber:null!=(p=b.passportNumber)?p:"",englishLevel:b.englishLevel,otherLanguages:(null!=(x=b.otherLanguages)?x:[]).map(e=>({language:e.language,level:e.level})),work:null!=(g=b.work)?g:[],consentName:b.consentName,consentDate:b.consentDate,consentAbstract:b.consentAbstract,certifyAccurate:b.certifyAccurate,issuedAt:new Date().toISOString()};await (0,F.g)(v);let y=(0,a.jsx)(R,{name:v.name,qrPng:f}),A=await (0,Y.x8)(y).toBlob(),w=URL.createObjectURL(A);X(w)}catch(e){ed(e instanceof Error?e.message:String(e)),window.scrollTo({top:0,behavior:"smooth"})}finally{Z(!1)}}function ey(e,s){B(e,null!=s?s:void 0,{shouldValidate:!0})}return(0,a.jsxs)("main",{className:"mx-auto max-w-3xl px-4 py-8",children:[(0,a.jsx)("div",{className:"mb-6 rounded border border-emerald-200 bg-emerald-50 px-3 py-2 text-sm text-emerald-900",children:"Secure submission • QR contains only a random ID • Minimal non-PII metadata is stored temporarily for the verification demo"}),(0,a.jsx)("h1",{className:"mb-4 text-2xl font-semibold text-slate-900",children:"Driver Registration"}),ei&&(0,a.jsx)("div",{className:"mb-4 rounded border border-amber-300 bg-amber-50 px-3 py-2 text-sm text-amber-900",children:ei}),eu&&(0,a.jsxs)("div",{className:"mb-4 rounded border border-rose-300 bg-rose-50 px-3 py-2 text-sm text-rose-900",children:[(0,a.jsx)("p",{className:"font-medium",children:"Please fix the following:"}),(0,a.jsx)("ul",{className:"list-inside list-disc",children:eu.slice(0,6).map((e,s)=>(0,a.jsx)("li",{children:e},s))})]}),(0,a.jsxs)("form",{onSubmit:k(ev,function(e){let s=[],t=e=>{e&&"string"==typeof e&&s.push(e)},a=["givenName","surname","jurisdiction","licenseNo","licenseClass","licenseExpiry","dob","email","phone","postal","citizenship","residencyCA","prNumber","permitType","uci","passportCountry","passportNumber","docLicenseFront","docLicenseBack","docHealthCard","docPR","docPassport","docPermit","consentName","consentDate","consentAbstract","certifyAccurate"];for(let s of a){var l;let a=null==(l=e[s])?void 0:l.message;a&&t(a)}em(s.length?s:["Please review the highlighted fields."]);let r=a.find(s=>!!e[s]);if(r){let e=document.querySelector('[name="'.concat(String(r),'"]'));e&&"function"==typeof e.scrollIntoView&&e.scrollIntoView({behavior:"smooth",block:"center"}),e&&"function"==typeof e.focus&&e.focus()}}),className:"space-y-10",children:[(0,a.jsxs)("section",{className:"space-y-4",children:[(0,a.jsx)("h2",{className:"text-lg font-medium",children:"Identity & Licence"}),(0,a.jsx)(K,{register:P,setValue:B,errors:L}),(0,a.jsxs)("div",{className:"grid gap-4 sm:grid-cols-2",children:[(0,a.jsx)(eo,{label:"Issuing jurisdiction",err:null==(e=L.jurisdiction)?void 0:e.message,children:(0,a.jsxs)("select",{...P("jurisdiction"),className:"mt-1 w-full rounded border border-slate-300 p-2",children:[(0,a.jsx)("option",{value:"",children:"Select"}),(0,a.jsx)("option",{children:"CA-MB"}),(0,a.jsx)("option",{children:"CA-ON"}),(0,a.jsx)("option",{children:"CA-AB"}),(0,a.jsx)("option",{children:"CA-BC"}),(0,a.jsx)("option",{children:"CA-SK"}),(0,a.jsx)("option",{children:"CA-QC"}),(0,a.jsx)("option",{children:"CA-NB"}),(0,a.jsx)("option",{children:"CA-NL"}),(0,a.jsx)("option",{children:"CA-NS"}),(0,a.jsx)("option",{children:"CA-PE"}),(0,a.jsx)("option",{children:"CA-YT"}),(0,a.jsx)("option",{children:"CA-NT"}),(0,a.jsx)("option",{children:"CA-NU"})]})}),(0,a.jsx)(_,{register:P,setValue:B,watch:D,errors:L}),(0,a.jsx)(eo,{label:"Licence expiry",err:null==(s=L.licenseExpiry)?void 0:s.message,children:(0,a.jsx)("input",{type:"date",...P("licenseExpiry"),className:"mt-1 w-full rounded border border-slate-300 p-2",min:new Date().toISOString().slice(0,10),max:"2099-12-31"})}),(0,a.jsx)(eo,{label:"Date of birth",err:null==(t=L.dob)?void 0:t.message,children:(0,a.jsx)("input",{type:"date",...P("dob"),className:"mt-1 w-full rounded border border-slate-300 p-2",max:new Date(new Date().setFullYear(new Date().getFullYear()-16)).toISOString().slice(0,10)})})]}),(0,a.jsx)(Q,{register:P,setValue:B,watch:D,errors:L})]}),(0,a.jsxs)("section",{className:"space-y-4",children:[(0,a.jsx)("h2",{className:"text-lg font-medium",children:"Contact"}),(0,a.jsxs)("div",{className:"grid gap-4 sm:grid-cols-2",children:[(0,a.jsx)(eo,{label:"Email",err:null==(i=L.email)?void 0:i.message,children:(0,a.jsx)("input",{type:"email",...P("email"),className:"mt-1 w-full rounded border border-slate-300 p-2"})}),(0,a.jsx)(W,{register:P,setValue:B,watch:D,errors:L})]})]}),(0,a.jsxs)("section",{className:"space-y-4",children:[(0,a.jsx)("h2",{className:"text-lg font-medium",children:"Address"}),(0,a.jsxs)("div",{className:"grid gap-4 sm:grid-cols-2",children:[(0,a.jsx)(H,{register:P,setValue:B,errors:L}),(0,a.jsx)(et,{register:P,setValue:B,watch:D,errors:L,label:"Country"}),(0,a.jsx)(er,{register:P,setValue:B,watch:D,errors:L}),(0,a.jsx)(eo,{label:"City",children:(0,a.jsx)("input",{...P("city"),className:"mt-1 w-full rounded border border-slate-300 p-2"})}),(0,a.jsx)(eo,{label:"Address line 1",children:(0,a.jsx)("input",{...P("address1"),className:"mt-1 w-full rounded border border-slate-300 p-2"})}),(0,a.jsx)(eo,{label:"Address line 2",children:(0,a.jsx)("input",{...P("address2"),className:"mt-1 w-full rounded border border-slate-300 p-2"})})]})]}),(0,a.jsx)(q,{register:P,watch:D,setValue:B,errors:L}),eb&&(0,a.jsxs)("section",{className:"space-y-3",children:[(0,a.jsx)("h3",{className:"font-medium",children:"Permit details"}),(0,a.jsxs)("div",{className:"grid gap-4 sm:grid-cols-3",children:["Work Permit"===ex&&(0,a.jsx)(eo,{label:"Permit type",err:null==(o=L.permitType)?void 0:o.message,children:(0,a.jsxs)("select",{...P("permitType"),className:"mt-1 w-full rounded border border-slate-300 p-2",defaultValue:"",children:[(0,a.jsx)("option",{value:"",disabled:!0,children:"Select type"}),(0,a.jsx)("option",{value:"Closed (employer-specific)",children:"Closed (employer-specific)"}),(0,a.jsx)("option",{value:"Open work permit",children:"Open work permit"}),(0,a.jsx)("option",{value:"PGWP",children:"Post-Graduation Work Permit (PGWP)"}),(0,a.jsx)("option",{value:"IEC",children:"IEC (Working Holiday, YP, Co-op)"}),(0,a.jsx)("option",{value:"Other",children:"Other"})]})}),(0,a.jsxs)(eo,{label:"UCI number",err:null==(d=L.uci)?void 0:d.message,children:[(0,a.jsx)("input",{...P("uci"),className:"mt-1 w-full rounded border border-slate-300 p-2 font-mono tracking-wider",placeholder:"0000-0000 or 0000-0000-00",inputMode:"numeric",onChange:e=>{let s=e.target.value.replace(/\D/g,"").slice(0,10),t=s;s.length>8?t="".concat(s.slice(0,4),"-").concat(s.slice(4,8),"-").concat(s.slice(8)):s.length>4&&(t="".concat(s.slice(0,4),"-").concat(s.slice(4))),e.target.value=t,B("uci",t,{shouldValidate:!0})}}),(0,a.jsx)("p",{className:"text-xs text-slate-500",children:"8 or 10 digits (hyphens allowed). Example: 1234-5678 or 1234-5678-90"})]}),(0,a.jsx)(eo,{label:"Permit expiry",err:null==(u=L.permitExpiry)?void 0:u.message,children:(0,a.jsx)("input",{type:"date",...P("permitExpiry"),className:"mt-1 w-full rounded border border-slate-300 p-2",min:new Date().toISOString().slice(0,10),max:"2099-12-31"})})]})]}),eN&&(0,a.jsxs)("section",{className:"space-y-3",children:[(0,a.jsx)("h3",{className:"font-medium",children:"Permanent Resident"}),(0,a.jsx)("div",{className:"grid gap-4 sm:grid-cols-2",children:(0,a.jsx)(eo,{label:"PR card number (Document No.)",err:null==(m=L.prNumber)?void 0:m.message,children:(0,a.jsx)("input",{...P("prNumber"),className:"mt-1 w-full rounded border border-slate-300 p-2 tracking-wider",placeholder:"1234567890"})})})]}),eg&&(0,a.jsxs)("section",{className:"space-y-3",children:[(0,a.jsx)("h3",{className:"font-medium",children:"Passport"}),(0,a.jsxs)("div",{className:"grid gap-4 sm:grid-cols-3",children:[(0,a.jsx)(ee,{name:"passportCountry",label:"Passport country",register:P,setValue:B,errors:L,searchable:!1}),(0,a.jsx)(es,{countryCode:eh,register:P,setValue:B,errors:L})]})]}),(0,a.jsxs)("section",{className:"space-y-4",children:[(0,a.jsx)("h2",{className:"text-lg font-medium",children:"Languages"}),(0,a.jsxs)("div",{className:"grid gap-4 sm:grid-cols-2 items-end",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"block text-sm text-slate-700",children:"English"}),(0,a.jsx)("input",{value:"English",readOnly:!0,className:"mt-1 w-full rounded border border-slate-200 bg-slate-50 p-2 text-slate-700"})]}),(0,a.jsx)(eo,{label:"Level (required)",err:null==(p=L.englishLevel)?void 0:p.message,children:(0,a.jsxs)("select",{...P("englishLevel"),className:"mt-1 w-full rounded border border-slate-300 p-2",defaultValue:"",children:[(0,a.jsx)("option",{children:"Basic"}),(0,a.jsx)("option",{children:"Conversational"}),(0,a.jsx)("option",{children:"Fluent"}),(0,a.jsx)("option",{children:"Native"})]})})]}),(0,a.jsx)(ec,{value:D("otherLanguages")||[],onChange:e=>B("otherLanguages",e,{shouldValidate:!0})})]}),(0,a.jsxs)("section",{className:"space-y-3",children:[(0,a.jsx)("h2",{className:"text-lg font-medium",children:"Work Experience (last 3 years)"}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{className:"text-sm text-slate-700",children:"Add up to 10 entries"}),(0,a.jsx)("button",{type:"button",onClick:()=>M({company:"",role:"",start:"",end:""}),className:"text-sm underline",children:"Add"})]}),E.map((e,s)=>{var t,l,r,n,i,o,c,d,u,m,p,x;return(0,a.jsxs)("div",{className:"grid gap-3 sm:grid-cols-5 items-end",children:[(0,a.jsx)(eo,{label:"Company",err:null==(r=L.work)||null==(l=r[s])||null==(t=l.company)?void 0:t.message,children:(0,a.jsx)("input",{...P("work.".concat(s,".company")),className:"mt-1 w-full rounded border border-slate-300 p-2"})}),(0,a.jsx)(eo,{label:"Role",err:null==(o=L.work)||null==(i=o[s])||null==(n=i.role)?void 0:n.message,children:(0,a.jsx)("input",{...P("work.".concat(s,".role")),className:"mt-1 w-full rounded border border-slate-300 p-2"})}),(0,a.jsx)(eo,{label:"From",err:null==(u=L.work)||null==(d=u[s])||null==(c=d.start)?void 0:c.message,children:(0,a.jsx)("input",{type:"date",...P("work.".concat(s,".start")),className:"mt-1 w-full rounded border border-slate-300 p-2"})}),(0,a.jsx)(eo,{label:"To",err:null==(x=L.work)||null==(p=x[s])||null==(m=p.end)?void 0:m.message,children:(0,a.jsx)("input",{type:"date",...P("work.".concat(s,".end")),className:"mt-1 w-full rounded border border-slate-300 p-2"})}),(0,a.jsx)("div",{className:"flex items-end",children:(0,a.jsx)("button",{type:"button",className:"ml-auto rounded border px-3 py-2 text-sm hover:bg-slate-50",onClick:()=>V(s),children:"Remove"})})]},e.id)})]}),(0,a.jsxs)("section",{className:"space-y-4",children:[(0,a.jsx)("h2",{className:"text-lg font-medium",children:"Documents"}),(0,a.jsx)(z,{label:"Licence - front",required:!0,value:null!=(j=D("docLicenseFront"))?j:null,onChange:e=>ey("docLicenseFront",e)}),(0,a.jsx)(z,{label:"Licence - back",required:!0,value:null!=(C=D("docLicenseBack"))?C:null,onChange:e=>ey("docLicenseBack",e)}),(0,a.jsx)(z,{label:"Health card",required:!0,value:null!=(f=D("docHealthCard"))?f:null,onChange:e=>ey("docHealthCard",e)}),eN&&(0,a.jsx)(z,{label:"PR Card",required:!0,value:null!=(v=D("docPR"))?v:null,onChange:e=>ey("docPR",e)}),("Canadian Citizen"===ep||eg)&&(0,a.jsx)(z,{label:"Passport",required:!0,value:null!=(y=D("docPassport"))?y:null,onChange:e=>ey("docPassport",e)}),eb&&(0,a.jsx)(z,{label:"Work/Study Permit",required:!0,value:null!=(A=D("docPermit"))?A:null,onChange:e=>ey("docPermit",e)}),(0,a.jsx)("p",{className:"text-xs text-slate-500",children:"Accepted: JPG/PNG • Max 4 MB each."})]}),(0,a.jsxs)("section",{className:"space-y-2",children:[(0,a.jsx)("h2",{className:"text-lg font-medium",children:"Consent"}),(0,a.jsxs)("label",{className:"flex items-start gap-2 text-sm text-slate-800",children:[(0,a.jsx)("input",{type:"checkbox",...P("consentAbstract"),className:"mt-1"}),"I authorise [ORG] to request my driver abstract from the issuing authority."]}),(0,a.jsxs)("div",{className:"grid gap-4 sm:grid-cols-3",children:[(0,a.jsx)(eo,{label:"Type your name to sign",err:null==(x=L.consentName)?void 0:x.message,children:(0,a.jsx)("input",{...P("consentName"),className:"mt-1 w-full rounded border border-slate-300 p-2"})}),(0,a.jsx)(eo,{label:"Date",err:null==(g=L.consentDate)?void 0:g.message,children:(0,a.jsx)("input",{type:"date",...P("consentDate"),defaultValue:new Date().toISOString().slice(0,10),className:"mt-1 w-full rounded border border-slate-300 p-2"})})]}),(0,a.jsxs)("label",{className:"flex items-start gap-2 text-sm text-slate-800",children:[(0,a.jsx)("input",{type:"checkbox",...P("certifyAccurate"),className:"mt-1"}),"I certify the information provided is accurate."]}),(null==(b=L.consentAbstract)?void 0:b.message)&&(0,a.jsx)("p",{className:"text-xs text-rose-600",children:String(L.consentAbstract.message)}),(null==(N=L.certifyAccurate)?void 0:N.message)&&(0,a.jsx)("p",{className:"text-xs text-rose-600",children:String(L.certifyAccurate.message)})]}),(0,a.jsxs)("div",{className:"flex items-center gap-3 pt-2",children:[(0,a.jsx)("button",{type:"submit",className:"rounded bg-emerald-600 px-4 py-2 text-white hover:bg-emerald-700 disabled:opacity-50",disabled:U,children:U?"Generating…":"Submit & Generate QR"}),(0,a.jsx)("span",{className:"text-sm text-slate-500",children:"Data stays on your device for this demo. No upload occurs."})]})]}),$&&J&&(0,a.jsxs)("section",{className:"mt-10 rounded border border-slate-200 p-4",children:[(0,a.jsx)("h3",{className:"mb-2 text-base font-medium",children:"Your QR & Card"}),(0,a.jsxs)("div",{className:"flex items-center gap-6",children:[(0,a.jsx)(O.default,{src:$,alt:"QR code",width:160,height:160,className:"h-40 w-40 border border-slate-200"}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("a",{href:J,download:"driver-card-".concat((ef||(null!=(w=null==ea?void 0:ea.slice(0,8))?w:"card")).replace(/[^a-z0-9-_]+/gi,"_").slice(0,40)||"card",".pdf"),className:"inline-flex rounded bg-slate-900 px-4 py-2 text-white hover:bg-slate-800",children:"Download Card (PDF)"}),ej&&(0,a.jsxs)("p",{className:"text-sm text-emerald-700 font-mono",children:["Your verification PIN: ",(0,a.jsx)("strong",{children:ej})]}),(0,a.jsx)("p",{className:"text-sm text-slate-600",children:"Card shows only your name and this QR. The QR contains only a random ID (no personal data). A minimal non-PII snapshot is stored temporarily to enable verification."})]})]})]})]})}function eo(e){let{label:s,err:t,children:l}=e;return(0,a.jsxs)("label",{className:"block",children:[(0,a.jsx)("span",{className:"block text-sm text-slate-700",children:s}),l,t&&(0,a.jsx)("p",{className:"text-xs text-rose-600",children:t})]})}function ec(e){let{value:s,onChange:t}=e,l=null!=s?s:[];function r(e,s){let a=[...l];a[e]={...a[e],...s},t(a)}return(0,a.jsxs)("div",{className:"space-y-2",children:[l.map((e,s)=>(0,a.jsxs)("div",{className:"grid gap-3 sm:grid-cols-3 items-end",children:[(0,a.jsx)(eo,{label:"Other language",children:(0,a.jsxs)("select",{value:e.language,onChange:e=>r(s,{language:e.target.value}),className:"mt-1 w-full rounded border border-slate-200 bg-slate-50 p-2 text-slate-700",children:[(0,a.jsx)("option",{value:"",children:"Select language"}),["Arabic","Bengali","Chinese (Cantonese)","Chinese (Mandarin)","Dutch","English","Farsi","French","German","Gujarati","Hebrew","Hindi","Italian","Japanese","Korean","Malay","Marathi","Panjabi (Punjabi)","Polish","Portuguese","Punjabi","Russian","Spanish","Tagalog","Tamil","Telugu","Thai","Turkish","Ukrainian","Urdu","Vietnamese"].map(e=>(0,a.jsx)("option",{value:e,children:e},e))]})}),(0,a.jsx)(eo,{label:"Level",children:(0,a.jsxs)("select",{value:e.level,onChange:e=>r(s,{level:e.target.value}),className:"mt-1 w-full rounded border border-slate-300 p-2",children:[(0,a.jsx)("option",{children:"Basic"}),(0,a.jsx)("option",{children:"Conversational"}),(0,a.jsx)("option",{children:"Fluent"}),(0,a.jsx)("option",{children:"Native"})]})}),(0,a.jsx)("div",{className:"flex items-end",children:(0,a.jsx)("button",{type:"button",onClick:()=>(function(e){let s=[...l];s.splice(e,1),t(s)})(s),className:"ml-auto rounded border px-3 py-2 text-sm hover:bg-slate-50",children:"Remove"})})]},s)),(0,a.jsx)("div",{className:"flex",children:(0,a.jsx)("button",{type:"button",onClick:function(){t([...l||[],{language:"",level:"Conversational"}])},className:"ml-auto inline-flex items-center gap-2 rounded bg-slate-900 px-3 py-2 text-sm text-white hover:bg-slate-800",title:"Add another language",children:(0,a.jsx)("span",{children:"+ Add language"})})})]})}},6624:(e,s,t)=>{Promise.resolve().then(t.bind(t,5057))},8061:(e,s,t)=>{"use strict";t.d(s,{$:()=>r,Y:()=>l});var a=t(6674);function l(e){return e?(0,a.createHash)("sha256").update(e).digest("hex"):""}function r(e,s){return l(e)===s}},9813:(e,s,t)=>{"use strict";async function a(e){let s=await fetch("/api/demo/snapshots",{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify(e),cache:"no-store"});if(!s.ok){var t;throw Error(null!=(t=function(e){if(!e||"object"!=typeof e)return null;let s=e.error;return"string"==typeof s?s:null}(await s.json().catch(()=>null)))?t:"Failed to save snapshot (".concat(s.status,")"))}}async function l(e){let s=await fetch("/api/demo/snapshots/".concat(encodeURIComponent(e)),{method:"GET",cache:"no-store"});if(404===s.status)return null;if(!s.ok)throw Error("Fetch failed (".concat(s.status,")"));return await s.json()}t.d(s,{Z:()=>l,g:()=>a})}},e=>{e.O(0,[734,341,685,298,882,892,7,842,262,929,358],()=>e(e.s=6624)),_N_E=e.O()}]);