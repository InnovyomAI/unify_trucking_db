{"version":3,"sources":["turbopack:///[project]/lib/demo-store-remote.ts"],"sourcesContent":["export type DriverSnapshot = {\n  qrid: string;\n  name: string;\n  jurisdiction: string;\n  licenseNo: string;\n  licenseClass: string;\n  licenseExpiry: string;\n  issuedAt: string; // ISO\n};\n\nexport async function saveSnapshotRemote(s: DriverSnapshot): Promise<void> {\n  const res = await fetch(\"/api/demo/snapshots\", {\n    method: \"POST\",\n    headers: { \"content-type\": \"application/json\" },\n    body: JSON.stringify(s),\n    cache: \"no-store\",\n  });\n  if (!res.ok) {\n    const j: unknown = await res.json().catch(() => null as unknown);\n    const msg = getErrorMessage(j) ?? `Failed to save snapshot (${res.status})`;\n    throw new Error(msg);\n  }\n}\n\nexport async function loadSnapshotRemote(qrid: string): Promise<DriverSnapshot | null> {\n  const res = await fetch(`/api/demo/snapshots/${encodeURIComponent(qrid)}`, {\n    method: \"GET\",\n    cache: \"no-store\",\n  });\n  if (res.status === 404) return null;\n  if (!res.ok) throw new Error(`Fetch failed (${res.status})`);\n  return (await res.json()) as DriverSnapshot;\n}\n\nfunction getErrorMessage(x: unknown): string | null {\n  if (!x || typeof x !== \"object\") return null;\n  const rec = x as Record<string, unknown>;\n  const e = rec[\"error\"];\n  return typeof e === \"string\" ? e : null;\n}\n"],"names":[],"mappings":"uCAUO,eAAe,EAAmB,CAAiB,EACxD,IAAM,EAAM,MAAM,MAAM,sBAAuB,CAC7C,OAAQ,OACR,QAAS,CAAE,eAAgB,kBAAmB,EAC9C,KAAM,KAAK,SAAS,CAAC,GACrB,MAAO,UACT,GACA,GAAI,CAAC,EAAI,EAAE,CAGT,CAHW,KAGL,AAAI,MADE,AACI,AAcpB,SAAS,AAAgB,CAAU,EACjC,GAAI,CAhB0B,AAgBzB,GAAkB,UAAb,OAAO,EAAgB,OAAO,KAExC,IAAM,EADM,AACF,EAAI,CAAD,IAAS,CACtB,MAAO,AAAa,iBAAN,EAAiB,EAAI,IACrC,EArBuB,MAAM,EAAI,IAAI,GAAG,KAAK,CAAC,IAAM,QACd,CAAC,yBAAyB,EAAE,EAAI,MAAM,CAAC,CAAC,CAAC,CAG/E,CAEO,eAAe,EAAmB,CAAY,EACnD,IAAM,EAAM,MAAM,MAAM,CAAC,oBAAoB,EAAE,mBAAmB,GAAA,CAAO,CAAE,CACzE,OAAQ,MACR,MAAO,UACT,GACA,GAAmB,MAAf,EAAI,MAAM,CAAU,OAAO,KAC/B,GAAI,CAAC,EAAI,EAAE,CAAE,MAAM,AAAI,MAAM,CAAC,cAAc,EAAE,EAAI,MAAM,CAAC,CAAC,CAAC,EAC3D,OAAQ,MAAM,EAAI,IAAI,EACxB"}