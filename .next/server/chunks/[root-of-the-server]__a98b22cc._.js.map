{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 3, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"","debugId":null}},
    {"offset": {"line": 55, "column": 0}, "map": {"version":3,"sources":["file:///Users/dvskrishna/Business/innovyom/Unify_Trucking_DB/unify_trucking_db/app/api/demo/snapshots/store.ts"],"sourcesContent":["// Simple in-memory snapshot store with TTL.\n// ⚠️ Resets on server restart; good for demos.\nexport type DriverSnapshot = {\n  qrid: string;\n  name: string;\n  jurisdiction: string;\n  licenseNo: string;\n  licenseClass: string;\n  licenseExpiry: string;\n  issuedAt: string; // ISO string\n};\n\nconst TTL_MS = 30 * 60 * 1000; // 30 minutes\nconst snapshots = new Map<string, { data: DriverSnapshot; expiresAt: number }>();\n\nfunction cleanup() {\n  const now = Date.now();\n  for (const [k, v] of snapshots) if (v.expiresAt <= now) snapshots.delete(k);\n}\n\nexport function setSnapshot(s: DriverSnapshot, ttlMs = TTL_MS) {\n  cleanup();\n  snapshots.set(s.qrid, { data: s, expiresAt: Date.now() + ttlMs });\n}\n\nexport function getSnapshot(qrid: string): DriverSnapshot | null {\n  cleanup();\n  const hit = snapshots.get(qrid);\n  if (!hit) return null;\n  if (hit.expiresAt <= Date.now()) {\n    snapshots.delete(qrid);\n    return null;\n  }\n  return hit.data;\n}\n\n"],"names":[],"mappings":"AAAA,4CAA4C;AAC5C,+CAA+C;;;;;;;AAW/C,MAAM,SAAS,KAAK,KAAK,MAAM,aAAa;AAC5C,MAAM,YAAY,IAAI;AAEtB,SAAS;IACP,MAAM,MAAM,KAAK,GAAG;IACpB,KAAK,MAAM,CAAC,GAAG,EAAE,IAAI,UAAW,IAAI,EAAE,SAAS,IAAI,KAAK,UAAU,MAAM,CAAC;AAC3E;AAEO,SAAS,YAAY,CAAiB,EAAE,QAAQ,MAAM;IAC3D;IACA,UAAU,GAAG,CAAC,EAAE,IAAI,EAAE;QAAE,MAAM;QAAG,WAAW,KAAK,GAAG,KAAK;IAAM;AACjE;AAEO,SAAS,YAAY,IAAY;IACtC;IACA,MAAM,MAAM,UAAU,GAAG,CAAC;IAC1B,IAAI,CAAC,KAAK,OAAO;IACjB,IAAI,IAAI,SAAS,IAAI,KAAK,GAAG,IAAI;QAC/B,UAAU,MAAM,CAAC;QACjB,OAAO;IACT;IACA,OAAO,IAAI,IAAI;AACjB","debugId":null}},
    {"offset": {"line": 90, "column": 0}, "map": {"version":3,"sources":["file:///Users/dvskrishna/Business/innovyom/Unify_Trucking_DB/unify_trucking_db/app/api/demo/snapshots/route.ts"],"sourcesContent":["import { NextRequest, NextResponse } from \"next/server\";\nimport { setSnapshot, type DriverSnapshot } from \"./store\";\n\nexport async function POST(req: NextRequest) {\n  try {\n    const body = (await req.json()) as Partial<DriverSnapshot>;\n    const required = [\n      \"qrid\",\n      \"name\",\n      \"jurisdiction\",\n      \"licenseNo\",\n      \"licenseClass\",\n      \"licenseExpiry\",\n      \"issuedAt\",\n    ] as const;\n    for (const k of required) {\n      if (!body[k] || typeof body[k] !== \"string\") {\n        return NextResponse.json({ error: `Missing or invalid ${k}` }, { status: 400, headers: noStore });\n      }\n    }\n    setSnapshot(body as DriverSnapshot);\n    return NextResponse.json({ ok: true }, { headers: noStore });\n  } catch {\n    return NextResponse.json({ error: \"Bad JSON\" }, { status: 400, headers: noStore });\n  }\n}\n\nconst noStore = { \"Cache-Control\": \"no-store\" } as const;\n"],"names":[],"mappings":";;;;AAAA;AACA;;;AAEO,eAAe,KAAK,GAAgB;IACzC,IAAI;QACF,MAAM,OAAQ,MAAM,IAAI,IAAI;QAC5B,MAAM,WAAW;YACf;YACA;YACA;YACA;YACA;YACA;YACA;SACD;QACD,KAAK,MAAM,KAAK,SAAU;YACxB,IAAI,CAAC,IAAI,CAAC,EAAE,IAAI,OAAO,IAAI,CAAC,EAAE,KAAK,UAAU;gBAC3C,OAAO,+QAAY,CAAC,IAAI,CAAC;oBAAE,OAAO,CAAC,mBAAmB,EAAE,GAAG;gBAAC,GAAG;oBAAE,QAAQ;oBAAK,SAAS;gBAAQ;YACjG;QACF;QACA,IAAA,yJAAW,EAAC;QACZ,OAAO,+QAAY,CAAC,IAAI,CAAC;YAAE,IAAI;QAAK,GAAG;YAAE,SAAS;QAAQ;IAC5D,EAAE,OAAM;QACN,OAAO,+QAAY,CAAC,IAAI,CAAC;YAAE,OAAO;QAAW,GAAG;YAAE,QAAQ;YAAK,SAAS;QAAQ;IAClF;AACF;AAEA,MAAM,UAAU;IAAE,iBAAiB;AAAW","debugId":null}}]
}